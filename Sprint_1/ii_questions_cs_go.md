# –ß–∞—Å—Ç—ã –≤–æ–ø—Ä–æ—Å –Ω–∞ —Å–æ–±–µ—Å–∞—Ö - —á2

## ‚ô®Ô∏è –ü—Ä–∞–∫—Ç–∏–∫–∞ –ø–æ –û–û–ü –≤ Go

### üëâ –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ #1

```go
func main() {
  var buf *bytes.Buffer
  f(buf)
  if buf != nil {
    fmt.Printf(buf.String())
  }
  fmt.Println("Main completed")
}

func f(out io.Writer) {
  if out != nil {
    _, err := out.Write([]byte("Hello world\n"))
    if err != nil {
      log.Fatal(err)
    }
  }
}
```

**–û—Ç–≤–µ—Ç:**
```go
panic: runtime error: invalid memory address or nil pointer dereference
```

–ò–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ —É –Ω–∞—Å —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ nil. –ú—ã –µ–≥–æ –ø–µ—Ä–µ–¥–∞–µ–º, –∫–∞–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —á–µ–∫ –Ω–∞ nil –æ–Ω –ø—Ä–æ–π–¥–µ—Ç, –Ω–æ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –º—ã —Å–ª–æ–≤–∏–º –ø–∞–Ω–∏–∫—É, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: `buf := new(bytes.Buffer)`

–°–∞–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—É—á–∞–µ—Ç—Å—è –Ω–µ nil, –∞ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–∞, –≤ go –Ω–µ—Ç –ø–æ –¥–µ—Ñ–æ–ª—Ç—É –≥–ª—É–±–æ–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–¥–Ω–æ –∏–∑ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π —Å —Ä–µ—Ñ–ª–µ–∫—Å–∏–µ–π: [—Å—Ç–∞—Ç—å—è](https://scribe.rip/go-check-nil-interface-the-right-way-d142776edef1)

---

### üëâ –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ #2

```go
type Animal interface{}
type Dog struct{}

func IsNil(i interface{}) bool {
    return i == nil
}

func main() {
    var a Animal
    var d *Dog

    fmt.Println(IsNil(a))
    fmt.Println(IsNil(d))
}
```

**–û—Ç–≤–µ—Ç:**

```go
true false 
```

–ö–æ–≥–¥–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å¬†`Animal`¬†–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –∑–Ω–∞—á–µ–Ω–∏—è, –æ–±–∞ –ø–æ–ª—è (–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Ç–∏–ø) —Ä–∞–≤–Ω—ã¬†`nil`, –ø–æ—ç—Ç–æ–º—É¬†`IsNil(a)`¬†–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç¬†`true`. –û–¥–Ω–∞–∫–æ, –∫–æ–≥–¥–∞ –º—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º¬†d¬†–∫–∞–∫ —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞¬†`Dog`, –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–≤–Ω–æ¬†`nil`, –Ω–æ —Ç–∏–ø —è–≤–ª—è–µ—Ç—Å—è¬†`*Dog`, –ø–æ—ç—Ç–æ–º—É¬†`IsNil(d)`¬†–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç¬†`false`

---

### üëâ –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ #3

```go
type Count int

func (c Count) Increment() {
  c++
}

func main() {
  var count Count
  count.Increment()
  fmt.Print(count)
}
```

**–û—Ç–≤–µ—Ç:**

```go
0
```

–í Go, –º–µ—Ç–æ–¥—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–ª—É—á–∞—é—Ç –∫–æ–ø–∏—é –∑–Ω–∞—á–µ–Ω–∏—è, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è. –í –≤–∞—à–µ–º —Å–ª—É—á–∞–µ, –º–µ—Ç–æ–¥¬†`Increment`¬†–ø–æ–ª—É—á–∞–µ—Ç –∫–æ–ø–∏—é¬†`Count`¬†–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —ç—Ç—É –∫–æ–ø–∏—é, –Ω–æ –æ—Ä–∏–≥–∏–Ω–∞–ª –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º.

---

### üëâ –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ #4

```go
func main() {
  var s *string
  fmt.Println(s == nil)
  var i interface{}
  fmt.Println(i == nil)
  i = s
  fmt.Println(i == nil)
}
```

**–û—Ç–≤–µ—Ç:**

```go
true true false
```

1. `var s *string`¬†–æ–±—ä—è–≤–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä–æ–∫—É –±–µ–∑ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –ø–æ—ç—Ç–æ–º—É –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é¬†`nil`, –∏¬†`fmt.Println(s == nil)`–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç¬†`true`

2. `var i interface{}`¬†–æ–±—ä—è–≤–ª—è–µ—Ç –ø—É—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–µ–∑ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –ø–æ—ç—Ç–æ–º—É –µ–≥–æ —Ç–∏–ø –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é¬†`nil`, –∏¬†`fmt.Println(i == nil)`¬†–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç¬†`true`
3. `i = s`¬†–ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É¬†`i`¬†–∑–Ω–∞—á–µ–Ω–∏–µ¬†`nil`¬†–∏ —Ç–∏–ø¬†`*string`, –ø–æ—ç—Ç–æ–º—É, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ¬†`nil`, —Å–∞–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ¬†`nil`, –∏¬†`fmt.Println(i == nil)`¬†–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç¬†`false`

---

### üëâ –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ #5

```go
type impl struct{}

type I interface {
  C()
}

func (*impl) C() {}

func A() I {
  return nil
}

func B() I {
  var ret *impl
  return ret
}

func main() {
  a := A()
  b := B()
  fmt.Println(a == b)
}
```

**–û—Ç–≤–µ—Ç:**

```go
false
```

–ö–æ–≥–¥–∞ –≤—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ¬†`nil`¬†–≤ —Ñ—É–Ω–∫—Ü–∏–∏¬†`A()`, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å¬†`I`¬†–∏–º–µ–µ—Ç¬†`nil`¬†–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–∏–ø–∞, –∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è. –û–¥–Ω–∞–∫–æ, –∫–æ–≥–¥–∞ –≤—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ¬†`ret`¬†–≤ —Ñ—É–Ω–∫—Ü–∏–∏¬†`B()`, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å¬†`I`¬†–∏–º–µ–µ—Ç —Ç–∏–ø¬†`*impl`, –Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ¬†`nil`

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å¬†`a`¬†–∏¬†`b`¬†–∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã, —Ö–æ—Ç—è –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è –∏ —Ä–∞–≤–Ω—ã¬†`nil`

---

### üëâ –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ #6

```go
type X struct {
  Val int
}

func (x X) S() {
  fmt.Println(x.Val)
}

func main() {
  x := X{10}
  defer x.S()
  x.Val = 256
}
```

**–û—Ç–≤–µ—Ç:**

```go
10
```

–í Go,¬†`defer`¬†–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—ã–∑–æ–≤–∞, –ø–æ—ç—Ç–æ–º—É –∏–∑–º–µ–Ω–µ–Ω–∏—è, –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–∏–µ –ø–æ—Å–ª–µ¬†`defer`, –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –æ—Ç–ª–æ–∂–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é

---

### üëâ –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ #7

```go
type Foo struct{}

func (f *Foo) A() {}
func (f *Foo) B() {}
func (f *Foo) C() {}

type AB interface {
  A()
  B()
}
type BC interface {
  B()
  C()
}

func main() {
  var f AB = &Foo{} 
 
  y := f.(BC) // —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ type-assertion? 

 
  y.A() // –∞ —ç—Ç–æ—Ç –≤—ã–∑–æ–≤?
  _ = y
}
```

**–û—Ç–≤–µ—Ç:**

`type-assertion` —Å—Ä–∞–±–æ—Ç–∞–µ—Ç

- –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–ø—ã—Ç–∫–∞ –∫–∞—Å—Ç–∞ `AB` –∫ —Ç–∏–ø—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `BC`
- —á—Ç–æ–±—ã —ç—Ç–æ —É–¥–∞–ª–æ—Å—å —Ç–∏–ø –¥–æ–ª–∂–µ–Ω —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å–µ –º–µ—Ç–æ–¥—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `BC`, —Ç.–µ. –º–µ—Ç–æ–¥—ã `B()` –∏ `C()`

–ò —Ç–∞–∫ –∫–∞–∫ `Foo` —Ä–µ–∞–ª–∏–∑—É–µ—Ç `B()` –∏ `C()`, —Ç–æ type assertion –ø—Ä–æ–π–¥–µ—Ç —É—Å–ø–µ—à–Ω–æ –∏ `y` –±—É–¥–µ—Ç —Ç–∏–ø–∞ `BC` —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `*Foo`

`y.A()` –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, —Ç.–∫. –º–µ—Ç–æ–¥ –Ω–µ –ø—Ä–æ–ø–∏—Å–∞–Ω

---

### üëâ –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ #8

```go
func main() {
  doer := NewDoer()
  if doer == nil {
    log.Fatalln("Doer object is nil, terminating...")
  }

  doer.do()
}

type Doer interface {
  do()
}

type Object struct{}

func NewDoer() Doer {
  var obj *Object
  return obj
}

func (o *Object) do() {
  fmt.Println("Doer is doing something...")
}
```

**–û—Ç–≤–µ—Ç:**

–°—Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ—Ç–æ–¥ `doer.do()`, –ø–æ—Å–∫–æ–ª—å–∫—É `NewDoer()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å —Ç–∏–ø–æ–º `Object`, –Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `nil`. –ü—Ä–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–∏ `if doer == nil` –±—É–¥–µ—Ç `false`, –ø–æ—Å–∫–æ–ª—å–∫—É —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏–¥–µ—Ç –ø–æ —Ç–∏–ø—É –∏ –∑–Ω–∞—á–µ–Ω–∏—é.

---

### üëâ –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ #9

#### –ï—Å—Ç—å –¥–≤–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –∫–∞–∫—É—é –≤—ã–±–µ—Ä–µ—à—å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è?

```go
type some1 struct{
  a bool
  b int32
  c string
}

type some2 struct{
  b int32
  c string
  a bool
}
```

**–û—Ç–≤–µ—Ç:**

```go
some1
```

Go –∏—Å–ø–æ–ª—å–∑—É–µ—Ç "–≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ" –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–º—è—Ç–∏. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–æ—Ä—è–¥–æ–∫ –ø–æ–ª–µ–π –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –º–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ –ø–∞–º—è—Ç–∏

–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞¬†`some1`¬†–±—É–¥–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å –º–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏, —á–µ–º¬†`some2`¬†–∏–∑-–∑–∞ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è. –í¬†`some2`, –ø–æ–ª–µ¬†`a`¬†(bool) –±—É–¥–µ—Ç –≤—ã—Ä–æ–≤–Ω–µ–Ω–æ –ø–æ –≥—Ä–∞–Ω–∏—Ü–µ 8 –±–∞–π—Ç, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º –≤ –ø–∞–º—è—Ç–∏.

–ú–æ–∂–Ω–æ —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ –≤—ã–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏—è `unsafe.Sizeof`

`some1 - 24; some2 - 32`

---

## ‚ô®Ô∏è –ó–∞–¥–∞—á–∏ –Ω–∞ –ø–æ–ø–∏—Å–∞—Ç—å —Ä—É–∫–∞–º–∏

### üëâ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä

```go
package iterator

/*
–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ (iterator),
–∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–±–æ—Ä–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ (max).
–†–µ–∞–ª–∏–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ –ø–æ —Å—Ä–µ–∑—É —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª.
*/

// element - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
type element interface{}

/*
iterator - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç
–ø–æ—ç–ª–µ–º–µ–Ω—Ç–Ω–æ –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã:

 next()
 val()
*/
type iterator interface {
}

// intIterator - –∏—Ç–µ—Ä–∞—Ç–æ—Ä –ø–æ —Ü–µ–ª—ã–º —á–∏—Å–ª–∞–º  (—Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å iterator)
type intIterator struct {
 // –ø–æ–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
}

// –º–µ—Ç–æ–¥—ã intIterator, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª–∏–∑—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å iterator

// –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä intIterator
func newIntIterator(src []int) *intIterator {
 // ...
}
```

```go
package iterator

import (
 "math"
 "testing"
)

func TestIterator(t *testing.T) {
  testCases := []struct {
    name     string
    iterable []int
    want     int
  }{
    // existing test cases
    {
      name:     "max element",
      iterable: []int{1, 2, 3, 4, 5, 6, 7, 8, 9, 10},
      want:     10,
    },
    {
      name:     "max element",
      iterable: []int{10, 9, 8, 7, 6, 5, 4, 3, 2, 1},
      want:     10,
    },
    {
      name:     "max element",
      iterable: []int{1, 2, 3, 4, 5, 6, 7, 8, 10, 9},
      want:     10,
    },
    {
      name:     "empty slice",
      iterable: []int{},
      want:     math.MinInt,
    },
    {
      name:     "negative numbers",
      iterable: []int{-1, -2, -3, -4, -5},
      want:     -1,
    },
    {
      name:     "single element",
      iterable: []int{1},
      want:     1,
    },
    {
      name:     "all elements same",
      iterable: []int{2, 2, 2, 2, 2},
      want:     2,
    },
  }

  for _, tc := range testCases {
    t.Run(
      tc.name, func(t *testing.T) {
        iter := newIntIterator(tc.iterable)

        maxValue := func(iterator iterator) int {
          maxValue := math.MinInt
          for iterator.next() {
            val := iterator.val().(int)
            if val > maxValue {
              maxValue = val
            }
          }
          return maxValue
        }(iter)

        if maxValue != tc.want {
          t.Errorf("Expected %v, got %v", tc.want, maxValue)
        }
      },
    )
  }
}
```

**–û—Ç–≤–µ—Ç:**

```go
package iterator

/*
üí°
next() –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç–ª–µ–º–µ–Ω—Ç—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true. –õ–∏–±–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç false, –µ—Å–ª–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å.

val() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —ç–ª–µ–º–µ–Ω—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
*/

/*
–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ (iterator), 
–∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–±–æ—Ä–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ (max).
–†–µ–∞–ª–∏–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ –ø–æ —Å—Ä–µ–∑—É —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª.

–ß—Ç–æ–±—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ—ë —Ä–µ—à–µ–Ω–∏–µ, –∑–∞–ø—É—Å—Ç–∏—Ç–µ go test -v –≤ –ø–∞–ø–∫–µ —Å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ–º.
–°–ª–µ–¥–∏—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –∑–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π —Ä–µ–∞–ª–∏–∑—É–µ–º—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –∏ –Ω–µ –º–µ–Ω—è–π—Ç–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—É newIntIterator
*/

// element - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
type element interface{}

/*
iterator - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç
–ø–æ—ç–ª–µ–º–µ–Ω—Ç–Ω–æ –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã (—Å–º. —Ç–µ—Å—Ç—ã):

 next()
 val()
*/
type iterator interface {
  next() bool
  val() element
}

// intIterator - –∏—Ç–µ—Ä–∞—Ç–æ—Ä –ø–æ —Ü–µ–ª—ã–º —á–∏—Å–ª–∞–º  (—Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å iterator)
type intIterator struct {
  values []int
  idx    int
}

// –º–µ—Ç–æ–¥—ã intIterator, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª–∏–∑—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å iterator
func (it *intIterator) next() bool {
  if it.idx >= len(it.values)-1 {
    return false
  }
  it.idx++
  return true
}

func (it *intIterator) val() element {
  if len(it.values) == 0 {
    return 0
  }
  return it.values[it.idx]
}

// –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä intIterator
func newIntIterator(src []int) *intIterator {
  return &intIterator{src, -1}
}
```

---

## ‚ô®Ô∏è –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã

### üí´ –û–û–ü

#### üëâ –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω–æ –û–û–ü –≤ Golang?

Go —Ä–µ–∞–ª–∏–∑—É–µ—Ç –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å–æ–±—ã–º —Å–ø–æ—Å–æ–±–æ–º:

1. **–°—Ç—Ä—É–∫—Ç—É—Ä—ã –≤–º–µ—Å—Ç–æ –∫–ª–∞—Å—Å–æ–≤**: –í Go –Ω–µ—Ç –∫–ª–∞—Å—Å–æ–≤. –í–º–µ—Å—Ç–æ –Ω–∏—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (struct), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ.

2. **–ú–µ—Ç–æ–¥—ã –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä**: –ú–µ—Ç–æ–¥—ã –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º —á–µ—Ä–µ–∑ "–ø—Ä–∏—ë–º–Ω–∏–∫" (receiver). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º.

3. **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ Go –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —Ç–æ–ª—å–∫–æ –º–µ—Ç–æ–¥—ã, –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–µ—è–≤–Ω–æ —Ä–µ–∞–ª–∏–∑—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã. –ï—Å–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–º–µ–µ—Ç –≤—Å–µ –º–µ—Ç–æ–¥—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π —ç—Ç–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

4. **–ù–µ—Ç –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è**: –í Go –Ω–µ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è ‚Äî –≤–∫–ª—é—á–µ–Ω–∏–µ –æ–¥–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ –¥—Ä—É–≥—É—é.

5. **–í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ**: –ú–æ–∂–Ω–æ –≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –æ–¥–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –¥—Ä—É–≥—É—é, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–¥ –±–µ–∑ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è.

6. **–ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è**: –†–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä –ø–µ—Ä–≤–æ–π –±—É–∫–≤—ã –∏–º—ë–Ω. –ï—Å–ª–∏ –∏–º—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã, –æ–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è (–ø—É–±–ª–∏—á–Ω–æ–µ), —Å –º–∞–ª–µ–Ω—å–∫–æ–π ‚Äî –Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è (–ø—Ä–∏–≤–∞—Ç–Ω–æ–µ).

---

#### üëâ –ö–∞–∫ —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –ø—Ä–∏–Ω—Ü–∏–ø—ã (–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è, –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è, –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º)?

–í Go –ø—Ä–∏–Ω—Ü–∏–ø—ã –û–û–ü —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è —Å–≤–æ–µ–æ–±—Ä–∞–∑–Ω–æ:

**–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ**: –í Go –Ω–µ—Ç –ø—Ä—è–º–æ–≥–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è ‚Äî –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤–Ω—É—Ç—Ä—å –¥—Ä—É–≥–æ–π. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º "–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å" –ø–æ–ª—è –∏ –º–µ—Ç–æ–¥—ã –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∫–ª–∞—Å—Å–æ–≤.

**–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è**: –†–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —Ç–æ–ª—å–∫–æ —Ç–µ –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –µ–¥–∏–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º, —Å–∫—Ä—ã–≤–∞—è –∏—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é.

**–ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è**: –î–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ –æ–± –∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏. –ü–æ–ª—è –∏ –º–µ—Ç–æ–¥—ã, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã, –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑–≤–Ω–µ –ø–∞–∫–µ—Ç–∞ (–ø—É–±–ª–∏—á–Ω—ã–µ), –∞ —Å –º–∞–ª–µ–Ω—å–∫–æ–π ‚Äî —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –ø–∞–∫–µ—Ç–∞ (–ø—Ä–∏–≤–∞—Ç–Ω—ã–µ). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∫—Ä—ã—Ç—å –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

**–ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º**: –†–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã. –õ—é–±–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ–∞–ª–∏–∑—É–µ—Ç –≤—Å–µ –º–µ—Ç–æ–¥—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–∞–º, –≥–¥–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —ç—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –ü—Ä–∏ —ç—Ç–æ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–Ω–æ–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –º–µ—Ç–æ–¥–∞–º —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ-—Ä–∞–∑–Ω–æ–º—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –æ–±—ä–µ–∫—Ç–∞.

---

#### üëâ –ö–∞–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤ Golang?

**–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ:** –í Go –Ω–µ—Ç –ø—Ä—è–º–æ–≥–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è ‚Äî –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤–Ω—É—Ç—Ä—å –¥—Ä—É–≥–æ–π. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º "–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å" –ø–æ–ª—è –∏ –º–µ—Ç–æ–¥—ã –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∫–ª–∞—Å—Å–æ–≤.

---

### ‚ôªÔ∏è –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

#### üëâ –ß—Ç–æ —Ç–∞–∫–æ–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å?

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ Go ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä –º–µ—Ç–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞. –û–Ω –æ–ø–∏—Å—ã–≤–∞–µ—Ç, —á—Ç–æ –æ–±—ä–µ–∫—Ç –¥–æ–ª–∂–µ–Ω —É–º–µ—Ç—å –¥–µ–ª–∞—Ç—å, –Ω–µ —É–∫–∞–∑—ã–≤–∞—è –∫–∞–∫ —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ.

#### üëâ –î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –∫–∞–∫ –æ–Ω–∏ —É—Å—Ç—Ä–æ–µ–Ω—ã?

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–∞ –∏ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –≤ Go. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞–∑–Ω—ã–º —Ç–∏–ø–∞–º –¥–∞–Ω–Ω—ã—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –æ–±—â–∏–π –Ω–∞–±–æ—Ä –º–µ—Ç–æ–¥–æ–≤. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤: —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö (–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞, —Ä–µ–∞–ª–∏–∑—É—é—â–µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å) –∏ –∑–Ω–∞—á–µ–Ω–∏—è —ç—Ç–æ–≥–æ —Ç–∏–ø–∞. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –≤ Go –Ω–µ—è–≤–Ω–∞—è ‚Äî —Ç–∏–ø –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –µ—Å–ª–∏ –∏–º–µ–µ—Ç –≤—Å–µ —Ç—Ä–µ–±—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã.

#### üëâ –ó–∞—á–µ–º –Ω—É–∂–µ–Ω –ø—É—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å?

–ü—É—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (interface{}) –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–æ–¥–æ–≤ –∏ –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ª—é–±–æ–≥–æ —Ç–∏–ø–∞. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –∑–∞—Ä–∞–Ω–µ–µ —Ç–∏–ø–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∏–ª–∏ –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏—Ö –ª—é–±—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö.

#### üëâ –ß–µ–º –ø—É—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –ø—É—Å—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã?

–ü—É—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (`interface{}`) –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ª—é–±–æ–≥–æ —Ç–∏–ø–∞ –∏ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–∞–º—è—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–∏–ø–∞ –∏ –∑–Ω–∞—á–µ–Ω–∏—è. –ü—É—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (`struct{}`) –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ–π, –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –Ω–∏–∫–∞–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–∞–º—è—Ç—å. –û–Ω–∏ –∏–º–µ—é—Ç —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Ä–∞–∑–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Äî –¥–ª—è –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–∞, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö.

#### üëâ –ï—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∞ –µ—Å—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –∫–æ—Ç–æ—Ä—ã–π nil. –ö–ª–∞–¥–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—å –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –ß—Ç–æ –µ—Å–ª–∏ —Å—Ä–∞–≤–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å nil?

–ü—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Ç–∞–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å `nil` —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç `false`. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ Go —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø–∞—Ä—ã (—Ç–∏–ø, –∑–Ω–∞—á–µ–Ω–∏–µ). –î–∞–∂–µ –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–≤–Ω–æ `nil`, —Ç–∏–ø –∏–∑–≤–µ—Å—Ç–µ–Ω (—ç—Ç–æ —Ç–∏–ø —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É), –ø–æ—ç—Ç–æ–º—É —Å–∞–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è `nil`. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–≤–µ–Ω `nil` —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –æ–±–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ‚Äî –∏ —Ç–∏–ø, –∏ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî —Ä–∞–≤–Ω—ã `nil`.

---

### üõë –û—à–∏–±–∫–∏, panic

#### üëâ recover –∏ panic

`recover` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–π –≥–æ—Ä—É—Ç–∏–Ω–µ –≥–¥–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ `panic`
`recover` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Ç–æ–π –∂–µ –≥–æ—Ä—É—Ç–∏–Ω–µ, –≥–¥–µ `panic`

---

#### üëâ –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ —Å –æ—à–∏–±–∫–∞–º–∏ –≤ Golang –æ—Ç –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤?

1. –û—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —è–≤–Ω–æ - –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∞ –Ω–µ –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º–∏
2. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `try/catch/finally`
3. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ `if err != nil { return err }`

---

#### üëâ –ö–∞–∫–∞—è –ø–∞—Ä–∞–¥–∏–≥–º–∞ –≤ Golang —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –∏ –æ—à–∏–±–æ–∫?

–í Go –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ä–∞–¥–∏–≥–º–∞ "–≤–æ–∑–≤—Ä–∞—Ç –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫" (return and check errors) –≤–º–µ—Å—Ç–æ –ø–∞—Ä–∞–¥–∏–≥–º—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π.

---

#### üëâ –ö–∞–∫–∏–µ –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–±–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –æ—à–∏–±–æ–∫?

–î–ª—è –æ–±–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –≤ Go –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –≤ –ø–∞–∫–µ—Ç–µ `errors` –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö:

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (—Å Go 1.13)**:

1. `errors.New(text)` - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –æ—à–∏–±–∫—É —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
2. `fmt.Errorf("%w", err)` - –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –æ—à–∏–±–∫—É, —Å–æ—Ö—Ä–∞–Ω—è—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏—Å—Ö–æ–¥–Ω–æ–π –æ—à–∏–±–∫–µ
3. `errors.Is(err, target)` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ —Ü–µ–ø–æ—á–∫–∞ –æ—à–∏–±–æ–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ü–µ–ª–µ–≤—É—é –æ—à–∏–±–∫—É
4. `errors.As(err, target)` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ —Ü–µ–ø–æ—á–∫–∞ –æ—à–∏–±–æ–∫ –æ—à–∏–±–∫—É –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –µ–µ target
5. `errors.Unwrap(err)` - –∏–∑–≤–ª–µ–∫–∞–µ—Ç –æ–±–µ—Ä–Ω—É—Ç—É—é –æ—à–∏–±–∫—É

**–°—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏**:

1. `github.com/pkg/errors`:
   - `errors.Wrap(err, message)` - –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –æ—à–∏–±–∫—É —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º
   - `errors.Wrapf(err, format, args...)` - –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –æ—à–∏–±–∫—É —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
   - `errors.WithStack(err)` - –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –æ—à–∏–±–∫—É —Å —Ç–µ–∫—É—â–∏–º —Å—Ç–µ–∫–æ–º –≤—ã–∑–æ–≤–æ–≤
   - `errors.Cause(err)` - –∏–∑–≤–ª–µ–∫–∞–µ—Ç –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—É—é –ø—Ä–∏—á–∏–Ω—É –æ—à–∏–±–∫–∏

2. `github.com/cockroachdb/errors`:
   - –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ—à–∏–±–∫–∞–º–∏, –≤–∫–ª—é—á–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã, —Ç–µ–≥–∏ –∏ —Ç.–¥.

---

#### üëâ –î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞–Ω–∏–∫–∞?

–ü–∞–Ω–∏–∫–∞ –≤ Go –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏–π, –∫–æ–≥–¥–∞ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.   

–û—Å–Ω–æ–≤–Ω—ã–µ —Å–ª—É—á–∞–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:

1. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: –∫–æ–≥–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å—Ç–æ–ª–∫–Ω—É–ª–∞—Å—å —Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–µ–π, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∞ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º.

2. **–ù–µ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–º—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è**: –∫–æ–≥–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏–ª–∏ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–±–æ—Ç—É.

3. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã**: –ø–∞–Ω–∏–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω–∞ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –±–µ–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –º–æ–∂–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª).

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤**: –≤ —Å–∏—Ç—É–∞—Ü–∏—è—Ö, –∫–æ–≥–¥–∞ –Ω–∞—Ä—É—à–∞—é—Ç—Å—è –≤–∞–∂–Ω—ã–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–ª–∏—Å—å –∫–∞–∫ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ.

5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.
