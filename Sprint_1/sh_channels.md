# Channels

>[–ë—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã](#–±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ-–∫–∞–Ω–∞–ª—ã)


## –ù–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã

### –ó–∞–∫—Ä—ã—Ç—ã–π –∫–∞–Ω–∞–ª

**‚ùáÔ∏è –í–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å, –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ù–ï –±—É—Ñ–∏—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–∞–Ω–∞–ª–æ–º, —á—Ç–æ:**

```go
stream := make(chan int) 
close(stream)

val, ok := <-stream
fmt.Println(val, ok)
// 0 false(—Å—Ç–∞—Ç—É—Å –∑–∞–∫—Ä—ã—Ç–∏—è –∫–∞–Ω–∞–ª–∞)
```

`0 false(—Å—Ç–∞—Ç—É—Å –∑–∞–∫—Ä—ã—Ç–∏—è –∫–∞–Ω–∞–ª–∞)` - `0` —ç—Ç–æ –Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ int, `false` - —ç—Ç–æ —Å—Ç–∞—Ç—É—Å –∑–∞–∫—Ä—ã—Ç–∏—è –∫–∞–Ω–∞–ª–∞

```go
stream := make(chan int

val, ok := <-stream
fmt.Println(val, ok)
 // deadlock 
```

`deadlock` - –ø–æ–ø—ã—Ç–∫–∞ —á—Ç–µ–Ω–∏—è –∏–∑ –ø—É—Å—Ç–æ–≥–æ –∫–∞–Ω–∞–ª–∞

```go
stream := make(chan int)
stream <- 1

val, ok := <-stream
fmt.Println(val, ok)
// deadlock 
```

`deadlock` - —Ç–∞–∫ –∫–∞–∫ –æ—Å–Ω–æ–≤–∞–Ω—è –≥–æ—Ä—Ä—É—Ç–∏–Ω–∞ main –≤—ã–ø–æ–ª–Ω–∏–ª–∞ –∑–∞–ø–∏—Å—å –≤ –∫–∞–Ω–∞–ª –∏ –æ–∂–∏–¥–∞–µ—Ç —á—Ç–µ–Ω–∏—è

```go
in := make(chan string)
close(in)
close(in)
// panic: close of closed channel
```

`panic` - –ø–æ–ø—ã—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç—å –∫–∞–Ω–∞–ª –≤—Ç–æ—Ä–æ–π —Ä–∞–∑

```go
in := make(chan string)
go func() {
    in <- "hi"
    close(in)
}()
fmt.Println(<-in)
// hi

in <- "bye"
// panic: send on closed channel
```

`panic` - –ø–æ–ø—ã—Ç–∫–∞ –∑–∞–ø–∏—Å–∞—Ç—å –≤ –∑–∞–∫—Ä—ã—Ç—ã–π –∫–∞–Ω–∞–ª

**ü§î –í—Å–µ–≥–¥–∞ –ª–∏ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –∫–∞–Ω–∞–ª?**

–ù–∞–≤–µ—Ä–Ω—è–∫–∞ –≤—ã —Ä–∞–Ω—å—à–µ —Ä–∞–±–æ—Ç–∞–ª–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ (—Ñ–∞–π–ª–∞–º–∏, —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ –ë–î) ‚Äî –∏ –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ –∏—Ö –≤—Å–µ–≥–¥–∞ —Å–ª–µ–¥—É–µ—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ —É—Ç–µ—á–∫–∏. –ù–æ –∫–∞–Ω–∞–ª ‚Äî –Ω–µ –≤–Ω–µ—à–Ω–∏–π —Ä–µ—Å—É—Ä—Å. –ö–æ–≥–¥–∞ –∫–∞–Ω–∞–ª –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è, —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ Go –æ—Å–≤–æ–±–æ–¥–∏—Ç –∑–∞–Ω—è—Ç—ã–µ –∏–º —Ä–µ—Å—É—Ä—Å—ã ‚Äî –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∑–∞–∫—Ä—ã—Ç –∫–∞–Ω–∞–ª –∏–ª–∏ –Ω–µ—Ç.

–ó–∞–∫—Ä—ã–≤–∞—Ç—å –∫–∞–Ω–∞–ª —Å—Ç–æ–∏—Ç —Å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π —Ü–µ–ª—å—é ‚Äî —Å–æ–æ–±—â–∏—Ç—å –µ–≥–æ —á–∏—Ç–∞—Ç–µ–ª—è–º, —á—Ç–æ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã. –ï—Å–ª–∏ —á–∏—Ç–∞—Ç–µ–ª—è–º —ç—Ç–æ –Ω–µ –≤–∞–∂–Ω–æ ‚Äî –º–æ–∂–Ω–æ –∏ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—Ç—å.

---

### –ò—Ç–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –∫–∞–Ω–∞–ª—É

–†–∞–∑–±–µ—Ä–µ–º –ø—Ä–∏–º–µ—Ä –≤, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑–¥–µ–ª—è–µ—Ç —Å—Ç—Ä–æ–∫—É –ø–æ –∑–∞–ø—è—Ç—ã–º –∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –ø—Ä–∏ –≤—ã–≤–æ–¥–µ:

```go
str := "one,two,,four"

in := make(chan string)
go func() {                                 // (1)
    words := strings.Split(str, ",")
    for _, word := range words {
        in <- word
    }
    close(in)  // –æ—Ç–∞–ø—Ä–∞–≤–∏—Ç–µ–ª—å –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –∫–∞–Ω–∞–ª —Ñ—É–Ω–∫—Ü–∏–µ–π close()
}()

for word := range in {                     // (2)
    if word != "" {
        fmt.Printf("%s ", word)
    }
}

// one two four
```

–ì–æ—Ä—É—Ç–∏–Ω–∞ ‚ûä —Ä–∞–∑–¥–µ–ª—è–µ—Ç —Å—Ç—Ä–æ–∫—É –ø–æ —Å–ª–æ–≤–∞–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ –∫–∞–Ω–∞–ª `in`. –¶–∏–∫–ª ‚ûã —á–∏—Ç–∞–µ—Ç —Å–ª–æ–≤–∞ –∏–∑ –∫–∞–Ω–∞–ª–∞ –∏ –ø–µ—á–∞—Ç–∞–µ—Ç –Ω–µ–ø—É—Å—Ç—ã–µ.

`range` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—á–∏—Ç—ã–≤–∞–µ—Ç –æ—á–µ—Ä–µ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –∑–∞–∫—Ä—ã—Ç –ª–∏ —Ç–æ—Ç. –ï—Å–ª–∏ –∑–∞–∫—Ä—ã—Ç ‚Äî –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ —Ü–∏–∫–ª–∞.  
‚ùáÔ∏è –í–∞–∂–Ω–æ, —á—Ç–æ `range` –ø–æ –∫–∞–Ω–∞–ª—É –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ **–û–î–ù–û** –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–∏–∫–∞–∫–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ —Ç.–ø.)

–ï—â–µ –æ–¥–∏–Ω –ø—Ä–∏–º–µ—Ä —Å `range`:

```go
// —Å—Ä–µ–∑
words := []string{"1", "2", "3"}
for idx, val := range words {
    fmt.Println(idx, val)
}

// –∫–∞–Ω–∞–ª
in := make(chan string)
go func() {
    in <- "1"
    in <- "2"
    in <- "3"
    close(in)
}()
for val := range in {
    fmt.Println(val)
}
```

---

### –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã

–ï—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–∞, –∫–æ—Ç–æ—Ä–∞—è —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:

```go
func main() {
    str := "one,two,,four"
    stream := make(chan string)
    go submit(str, stream)
    print(stream)
}

func submit(str string, stream chan string) {
    words := strings.Split(str, ",")
    for _, word := range words {
        stream <- word
    }
    close(stream)
}

func print(stream chan string) {
    for word := range stream {
        if word != "" {
            fmt.Printf("%s ", word)
        }
    }
    fmt.Println()
}
```

–ì–æ—Ä—É—Ç–∏–Ω–∞ `submit` —Ä–∞–∑–±–∏–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –Ω–∞ —Å–ª–æ–≤–∞ –ø–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—é "`,`" –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞–∂–¥–æ–µ —Å–ª–æ–≤–æ –≤ –∫–∞–Ω–∞–ª `stream`.  
–¢–∞–∫ –∫–∞–∫ –∫–∞–Ω–∞–ª `stream` –Ω–µ –∏–º–µ–µ—Ç –±—É—Ñ–µ—Ä–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —Å–ª–æ–≤–æ –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è(–Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è) –∫–∞–Ω–∞–ª –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ —á—Ç–µ–Ω–∏—è.  
–ö–∞–∫ —Ç–æ–ª—å–∫–æ —Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–∞–Ω–∞–ª–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `print` —Å –ø–æ–º–æ—â—å—é —Ü–∏–∫–ª–∞, –≥–æ—Ä—É—Ç–∏–Ω–∞ `sumbit` –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ `stream`  –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Ü–∏–∫–ª –≤ `print` –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –ø–æ–∫–∞ –Ω–µ –ø—Ä–æ—á–∏—Ç–∞—Ç–µ—Å—è –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–æ—Å–ª–µ —á–µ–≥–æ –∫–∞–Ω–∞–ª –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è `close(stream)`

üîë –§—É–Ω–∫—Ü–∏—è `close(stream)` –Ω—É–∂–Ω–∞ –ø–æ –¥–≤—É–º –≤–∞–∂–Ω—ã–º –ø—Ä–∏—á–∏–Ω–∞–º:

- –°–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö: –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—é `print` —É–∑–Ω–∞—Ç—å, —á—Ç–æ –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –±—É–¥–µ—Ç. –ë–µ–∑ –∑–∞–∫—Ä—ã—Ç–∏—è –∫–∞–Ω–∞–ª–∞ —Ü–∏–∫–ª `for word := range stream` –Ω–∏–∫–æ–≥–¥–∞ –±—ã –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è, –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–∏—Å–ª–∞ –±—ã.
- –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤: –ó–∞–∫—Ä—ã—Ç–∏–µ –∫–∞–Ω–∞–ª–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–±–æ—Ä—â–∏–∫—É –º—É—Å–æ—Ä–∞ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∫–∞–Ω–∞–ª–æ–º.

‚ùóÔ∏è **–í –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ –≥–ª—è–¥—è –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é –º—ã –Ω–µ –ø–æ–Ω–∏–º–∞–µ–º –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –æ–Ω–∞ –∏–ª–∏ —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –¥–ª—è —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è(direction) –∫–∞–Ω–∞–ª–∞**

–ß—Ç–æ–±—ã —É–º–µ–Ω—å—à–∏—Ç—å –ø—É—Ç–∞–Ω–∏—Ü—É –≤ –∫–∞–Ω–∞–ª–∞—Ö –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –∏ —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∫–∞–Ω–∞–ª–∞, –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å "–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ" –∫–∞–Ω–∞–ª—É:

- `chan`: –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é);
- `chan<-` : —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–∞–ø–∏—Å–∏ (send-only);
- `<-chan`: —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è (receive-only).

```go
func main() {
    str := "one,two,,four"
    stream := make(chan string)   // –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–Ω–∞–ª–∞ –¥–≤—É—Ö–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è 
    go submit(str, stream)
    print(stream)
}

func submit(str string, stream  chan<- string) {  // —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å—å
    words := strings.Split(str, ",")
    for _, word := range words {
        stream <- word
    }
    close(stream)
}

func print(stream <-chan string) {               // —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ
    for word := range stream {
        if word != "" {
            fmt.Printf("%s ", word)
        }
    }
    fmt.Println()
}
```

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º—ã –ø–æ–ª—É—á–∏–º –æ—à–∏–±–∫—É –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, —á—Ç–æ –ø–æ–º–æ–∂–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –Ω–µ–ø—Ä–∞–≤–ª—å–Ω–æ–π –∑–∞–ø–∏—á–∏ –∏–ª–∏ —á—Ç–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞

üí° **–ö–∞–Ω–∞–ª—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏, –∞ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∑–∞—è–≤–ª—è—é—Ç –∫–∞–∫ –æ–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ(–æ–±—ä—è–≤–ª—è—é—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ):**

```go
stream := make(chan int) // –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–Ω–∞–ª–∞ –¥–≤—É—Ö–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è

go func(in chan<- int) { // —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å—å
    in <- 42
}(stream)

func(out <-chan int) {  // —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ
    fmt.Println(<-out)
}(stream)

// 42
```

---

### –ö–∞–Ω–∞–ª –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

–ï—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç —Ñ—Ä–∞–∑—É –ø–æ —Å–ª–æ–≤–∞–º (—Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏):

```go
import (
 "fmt"
 "strings"
 "time"
 "math/rand"
)

// –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç —Ñ—Ä–∞–∑—É –ø–æ —Å–ª–æ–≤–∞–º (—Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏):
func say(id int, phrase string) {
    for _, word := range strings.Fields(phrase) {
        fmt.Printf("Worker #%d says: %s...\n", id, word)
        dur := time.Duration(rand.Intn(100)) * time.Millisecond
        time.Sleep(dur)
    }
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±–æ–ª—Ç—É—à–µ–∫, –ø–æ –æ–¥–Ω–æ–π –Ω –∫–∞–∂–¥—É—é —Ñ—Ä–∞–∑—É:
func main() {
    phrases := []string{
        "go is awesome",
        "cats are cute",
        "rain is wet",
        "channels are hard",
        "floor is lava",
    }
    for idx, phrase := range phrases {
        go say(idx+1, phrase)
    }
}
```

–ü—Ä–æ–≥—Ä–∞–º–º–∞, –∫–æ–Ω–µ—á–Ω–æ, –Ω–∏—á–µ–≥–æ –Ω–µ –ø–µ—á–∞—Ç–∞–µ—Ç ‚Äî —Ñ—É–Ω–∫—Ü–∏—è `main()` –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –æ—Ç—Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –±–æ–ª—Ç—É—à–∫–∞:

```go
$ go run say.go
<–ø—É—Å—Ç–æ>
```

`sync.WaitGroup` –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç, —á—Ç–æ–±—ã –¥–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≥–æ—Ä—É—Ç–∏–Ω. –ù–æ —Ç–∞–∫ –∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–µ–º ***¬´–∫–∞–Ω–∞–ª –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è¬ª*** (done channel):

```go
func say(done chan<- struct{}, id int, phrase string) {
    for _, word := range strings.Fields(phrase) {
        fmt.Printf("Worker #%d says: %s...\n", id, word)
        dur := time.Duration(rand.Intn(100)) * time.Millisecond
        time.Sleep(dur)
    }
    done <- struct{}{}                     // (1)
}

func main() {
    phrases := []string{
        "go is awesome",
        "cats are cute",
        "rain is wet",
        "channels are hard",
    }

    done := make(chan struct{})            // (2)

    for idx, phrase := range phrases {
        go say(done, idx+1, phrase)        // (3)
    }

    // wait for goroutines to finish
    for i := 0; i < len(phrases); i++ {    // (4)
        <-done
    }
}
```

**üîÑ –í–æ—Ç —á—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

- —Å–æ–∑–¥–∞–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª `done` ‚ûã –∏ –ø–µ—Ä–µ–¥–∞–µ–º –µ–≥–æ –≤ –∫–∞–∂–¥—É—é –≥–æ—Ä—É—Ç–∏–Ω—É ‚ûå;
- –≤ –≥–æ—Ä—É—Ç–∏–Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã ‚ûä;
- –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∂–¥–µ–º, –ø–æ–∫–∞ –∫–∞–∂–¥–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –∑–∞–ø–∏—à–µ—Ç –≤ –∫–∞–Ω–∞–ª ‚ûç.

–ß—Ç–æ–±—ã —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–ª–æ, –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Ç–æ—á–Ω–æ –∑–Ω–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –≥–æ—Ä—É—Ç–∏–Ω –∑–∞–ø—É—â–µ–Ω–æ (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ ‚Äî –ø–æ –æ–¥–Ω–æ–π –Ω–∞ –∫–∞–∂–¥—É—é –∏—Å—Ö–æ–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É). –ò–Ω–∞—á–µ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, —Å–∫–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–π —á–∏—Ç–∞—Ç—å –∏–∑ `done`.

**üß© –†–∞–∑–±–µ—Ä–µ–º –ª–æ–≥–∏–∫—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ—à–∞–≥–æ–≤–æ:**

1. –í `main()` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–∞–Ω–∞–ª `done` –±–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏ ‚ûã. –≠—Ç–æ—Ç –∫–∞–Ω–∞–ª –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã –∫–∞–∂–¥–æ–π –≥–æ—Ä—É—Ç–∏–Ω—ã.

2. –í —Ü–∏–∫–ª–µ ‚ûå –¥–ª—è –∫–∞–∂–¥–æ–π —Ñ—Ä–∞–∑—ã –∏–∑ –º–∞—Å—Å–∏–≤–∞ `phrases` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ —Å —Ñ—É–Ω–∫—Ü–∏–µ–π `say()`. –í—Å–µ–≥–æ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω–æ 4 –≥–æ—Ä—É—Ç–∏–Ω, –∫–∞–∂–¥–∞—è —Å–æ —Å–≤–æ–∏–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–º ID –∏ —Ñ—Ä–∞–∑–æ–π.

3. –ö–∞–∂–¥–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ `say()`:
   - –°–æ–≤–µ—Ä—à–∞–µ—Ç –ª–æ–≥–∏–∫—É —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ —Å—Ç—Ä–æ–∫–æ–π
   - –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö —Å–ª–æ–≤ —Å–≤–æ–µ–π —Ñ—Ä–∞–∑—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –∫–∞–Ω–∞–ª `done` ‚ûä

4. –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `main()` –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö –≥–æ—Ä—É—Ç–∏–Ω –≤—Ö–æ–¥–∏—Ç –≤ —Ü–∏–∫–ª –æ–∂–∏–¥–∞–Ω–∏—è ‚ûç, –≥–¥–µ –æ–Ω–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–∞–Ω–∞–ª–∞ `done` —Ä–æ–≤–Ω–æ 4 —Ä–∞–∑ (–ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –≥–æ—Ä—É—Ç–∏–Ω).

5. –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:
   - –ü–æ—Å–∫–æ–ª—å–∫—É –∫–∞–Ω–∞–ª `done` –Ω–µ –∏–º–µ–µ—Ç –±—É—Ñ–µ—Ä–∞, –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ –Ω–µ–≥–æ –±—É–¥–µ—Ç –±–ª–æ–∫–∏—Ä—É—é—â–µ–π - –≥–æ—Ä—É—Ç–∏–Ω–∞ `say()` –Ω–µ —Å–º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è, –ø–æ–∫–∞ –∫—Ç–æ-—Ç–æ –Ω–µ –ø—Ä–æ—á–∏—Ç–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
   - –ö–æ–≥–¥–∞ –ø–µ—Ä–≤–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –∫–∞–Ω–∞–ª `done`, –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `main()` –ø–æ–ª—É—á–∞–µ—Ç —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –æ–∂–∏–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–π
   - –ü–æ—Å–∫–æ–ª—å–∫—É –≥–æ—Ä—É—Ç–∏–Ω—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å —Ä–∞–∑–Ω—ã–º–∏ —Å–ª—É—á–∞–π–Ω—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏, –ø–æ—Ä—è–¥–æ–∫ –∏—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º
   - –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `main()` –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –¥–æ–∂–¥–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö 4 –≥–æ—Ä—É—Ç–∏–Ω –±–ª–∞–≥–æ–¥–∞—Ä—è 4 –æ–ø–µ—Ä–∞—Ü–∏—è–º —á—Ç–µ–Ω–∏—è –∏–∑ –∫–∞–Ω–∞–ª–∞

6. –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—Å–µ 4 –∑–Ω–∞—á–µ–Ω–∏–π –±—ã–ª–∏ –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ –∫–∞–Ω–∞–ª–∞ `done` (–∑–Ω–∞—á–∏—Ç, –≤—Å–µ 4 –≥–æ—Ä—É—Ç–∏–Ω –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å), —Ñ—É–Ω–∫—Ü–∏—è `main()` –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Å–≤–æ—é —Ä–∞–±–æ—Ç—É, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é –ø—Ä–æ–≥—Ä–∞–º–º—ã.

üí° *–≠—Ç–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª - —Ç–∏–ø–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–± –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –≥–æ—Ä—É—Ç–∏–Ω –≤ Go, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –¥–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á.*

Output:

```bash
$ go run say.go
Worker #5 says: floor...
Worker #1 says: go...
Worker #4 says: channels...
Worker #3 says: rain...
Worker #2 says: cats...
Worker #4 says: are...
Worker #3 says: is...
Worker #4 says: hard...
Worker #2 says: are...
Worker #5 says: is...
Worker #5 says: lava...
Worker #3 says: wet...
Worker #1 says: is...
Worker #2 says: cute...
Worker #1 says: awesome...
```

üí° *–≤–º–µ—Å—Ç–æ ***¬´–∫–∞–Ω–∞–ª–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è¬ª*** (done channel) –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `sync.WaitGroup`.*

---

## –ë—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã

–ë—É—Ñ–µ—Ä –≤ –∫–∞–Ω–∞–ª–∞—Ö —Å–ª—É–∂–∏—Ç –¥–ª—è –≤—Äe–º–µ–Ω–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –ø—Ä–µ–∂–¥–µ —á–µ–º —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ–π –æ—á–µ—Ä–µ–¥—å—é(FIFO) –ø–æ–ª—É—á–∏—Ç –∏ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω–∞.

–ù–∞ –±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–∞—Ö —Ä–∞–±–æ—Ç–∞—é—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ `len()` –∏ `cap()`:

- `cap()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—â—É—é –µ–º–∫–æ—Å—Ç—å –∫–∞–Ω–∞–ª–∞;
- `len()` ‚Äì –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–Ω–∞—á–µ–Ω–∏–π –≤ –∫–∞–Ω–∞–ª–µ.

```go
stream := make(chan int, 2)
fmt.Println(cap(stream), len(stream))
// 2 0

stream <- 7
fmt.Println(cap(stream), len(stream))
// 2 1

stream <- 7
fmt.Println(cap(stream), len(stream))
// 2 2

<-stream
fmt.Println(cap(stream), len(stream))
// 2 1
```

‚ùáÔ∏è –ï—Å–ª–∏ –≤ –∫–∞–Ω–∞–ª –∑–∞–ø–æ–ª–∞–Ω–µ–Ω, —Ç–æ –∫–∞–Ω–∞–ª –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è.

**üìù –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±—É—Ñ–µ—Ä–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞:**

```go
var wg sync.WaitGroup
wg.Add(2)

stream := make(chan bool)

send := func() {
    defer wg.Done()
    fmt.Println("Sender ready to send...")
    stream <- true                                // (1)
    fmt.Println("Sent!")
}

receive := func() {
    defer wg.Done()
    fmt.Println("Receiver not ready yet...")
    time.Sleep(500 * time.Millisecond)
    fmt.Println("Receiver ready to receive...")
    <-stream                                      // (2)
    fmt.Println("Received!")
}

go send()
go receive()
wg.Wait()
```

`send()` —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ö–æ—á–µ—Ç –ø–µ—Ä–µ–¥–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª, –Ω–æ receive() –ø–æ–∫–∞ –Ω–µ –≥–æ—Ç–æ–≤–∞. –ü–æ—ç—Ç–æ–º—É `send()` –≤—ã–Ω—É–∂–¥–µ–Ω–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —Ç–æ—á–∫–µ ‚ûä –∏ –∂–¥–∞—Ç—å 500 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥, –ø–æ–∫–∞ `receive()` –Ω–µ –ø—Ä–∏–¥–µ—Ç –≤ —Ç–æ—á–∫—É ‚ûã –∏ –Ω–µ —Å–æ–≥–ª–∞—Å–∏—Ç—Å—è –ø—Ä–∏–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞. –ü–æ–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ –≥–æ—Ä—É—Ç–∏–Ω—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ —Ç–æ—á–∫–µ –ø—Ä–∏–µ–º–∞/–ø–µ—Ä–µ–¥–∞—á–∏:

```bash
Receiver not ready yet...
Sender ready to send...
Receiver ready to receive...
Received!
Sent!
```

‚ùóÔ∏è –ß–∞—â–µ –≤—Å–µ–≥–æ —Ç–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞—Å —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç. –ù–æ —á—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –Ω–µ –∂–¥–∞–ª –ø–æ–ª—É—á–∞—Ç–µ–ª—è? –•–æ—Ç–∏–º, —á—Ç–æ–±—ã –æ–Ω –æ—Ç–ø—Ä–∞–≤–∏–ª –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª –∏ –∑–∞–Ω–∏–º–∞–ª—Å—è —Å–≤–æ–∏–º–∏ –¥–µ–ª–∞–º–∏. –ê –ø–æ–ª—É—á–∞—Ç–µ–ª—å –ø—É—Å—Ç—å –∑–∞–±–µ—Ä–µ—Ç, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤.  
üîÑ –ë—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª —Ä–µ—à–∞–µ—Ç –¥–∞–Ω–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É:

```go
// —Å–æ–∑–¥–∞–µ–º –∫–∞–Ω–∞–ª —Å –±—É—Ñ–µ—Ä–æ–º 1
// –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ
stream := make(chan bool, 1)

send := func() {
    // ...
}

receive := func() {
    // ...
}

go send()
go receive()
```

–¢–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –Ω–µ –∂–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—è:

```go
Receiver not ready yet...
Sender ready to send...
Sent!
Receiver ready to receive...
Received!
```

üí° –ë—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –Ω—É–∂–Ω—ã –Ω–µ –≤—Å–µ–≥–¥–∞. –ù–µ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª—è–π—Ç–µ –∏–º–∏ –∏ –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –æ–±—ã—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –ø–æ –∫–∞–∫–∏–º-—Ç–æ –ø—Ä–∏—á–∏–Ω–∞–º –Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç.

---

### N –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

–ì–æ—Ä—É—Ç–∏–Ω—ã ‚Äî –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã. –í–ø–æ–ª–Ω–µ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ 10, 100 –∏–ª–∏ 1000 —à—Ç—É–∫. –ù–æ —á—Ç–æ, –µ—Å–ª–∏ –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ñ—Ä–∞–∑ –±—É–¥–µ—Ç 100 —Ç—ã—Å—è—á –∏–ª–∏ –º–∏–ª–ª–∏–æ–Ω? –ü–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–∞—è –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å –≤—Å–µ —Ä–∞–≤–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —è–¥–µ—Ä. –¢–∞–∫ —á—Ç–æ –Ω–µ—Ç —Å–º—ã—Å–ª–∞ –≤–ø—É—Å—Ç—É—é —Ä–∞—Å—Ö–æ–¥–æ–≤–∞—Ç—å –ø–∞–º—è—Ç—å –Ω–∞ —Å–æ—Ç–Ω–∏ —Ç—ã—Å—è—á –≥–æ—Ä—É—Ç–∏–Ω, –µ—Å–ª–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤—Å–µ —Ä–∞–≤–Ω–æ –±—É–¥—É—Ç —Ç–æ–ª—å–∫–æ –≤–æ—Å–µ–º—å (–∏–ª–∏ —Å–∫–æ–ª—å–∫–æ —É –≤–∞—Å —Ç–∞–º CPU).

–°–∫–∞–∂–µ–º, –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∏ —Ç–æ–ª—å–∫–æ N say-–≥–æ—Ä—É—Ç–∏–Ω. –î–æ–±–∏—Ç—å—Å—è —ç—Ç–æ–≥–æ –ø–æ–º–æ–∂–µ—Ç –±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª. –ò–¥–µ—è —Å–ª–µ–¥—É—é—â–∞—è:

- —Å–æ–∑–¥–∞–µ–º –∫–∞–Ω–∞–ª —Å –±—É—Ñ–µ—Ä–æ–º —Ä–∞–∑–º–µ—Ä–∞ N –∏ –∑–∞–ø–æ–ª–Ω—è–µ–º –µ–≥–æ ¬´—Ç–æ–∫–µ–Ω–∞–º–∏¬ª (–ª—é–±—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏);
- –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –≥–æ—Ä—É—Ç–∏–Ω–∞ –∑–∞–±–∏—Ä–∞–µ—Ç —Ç–æ–∫–µ–Ω –∏–∑ –∫–∞–Ω–∞–ª–∞;
- –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã –≥–æ—Ä—É—Ç–∏–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–∫–µ–Ω –≤ –∫–∞–Ω–∞–ª.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –µ—Å–ª–∏ –≤ –∫–∞–Ω–∞–ª–µ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å —Ç–æ–∫–µ–Ω–æ–≤, —Ç–æ –æ—á–µ—Ä–µ–¥–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∏ –±—É–¥–µ—Ç –∂–¥–∞—Ç—å, –ø–æ–∫–∞ –∫—Ç–æ-–Ω–∏–±—É–¥—å –≤–µ—Ä–Ω–µ—Ç —Ç–æ–∫–µ–Ω –≤ –∫–∞–Ω–∞–ª. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–ø—É—â–µ–Ω—ã –±—É–¥—É—Ç –Ω–µ –±–æ–ª–µ–µ N –≥–æ—Ä—É—Ç–∏–Ω.

–í–æ—Ç –∫–∞–∫ —ç—Ç–æ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏ N = 2:

```go
func main() {
    phrases := []string{
        // ...
    }

    // –ø—É–ª –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –¥–ª—è 2 –≥–æ—Ä—É—Ç–∏–Ω
    pool := make(chan int, 2)
    pool <- 1
    pool <- 2

    for _, phrase := range phrases {
        // –ø–æ–ª—É—á–∞–µ–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–∑ –ø—É–ª–∞,
        // –µ—Å–ª–∏ –µ—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–µ
        id := <-pool
        go say(pool, id, phrase)
    }

    // –¥–æ–∂–∏–¥–∞–µ–º—Å—è, –ø–æ–∫–∞ –≤—Å–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –∑–∞–∫–æ–Ω—á–∞—Ç —Ä–∞–±–æ—Ç—É
    // (—Ç–æ –µ—Å—Ç—å –≤—Å–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –≤–µ—Ä–Ω—É—Ç—Å—è –≤ –ø—É–ª)
    <-pool
    <-pool
}

// –±–æ–ª—Ç–∞–ª–∫–∞ –∏–∑ —Ä–∞–Ω–Ω–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞
func say(pool chan<- int, id int, phrase string) {
    for _, word := range strings.Fields(phrase) {
        fmt.Printf("Worker #%d says: %s...\n", id, word)
        dur := time.Duration(rand.Intn(100)) * time.Millisecond
        time.Sleep(dur)
    }
    // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤ –ø—É–ª
    pool <- id
}
```

üí° –í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–∞—Ç—Ç–µ—Ä–Ω ***"–ø—É–ª –≤–æ—Ä–∫–µ—Ä–æ–≤"*** —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤—ã–ø–æ–ª–Ω—è—é—â–∏—Ö—Å—è –≥–æ—Ä—É—Ç–∏–Ω.  

```bash
Worker #2 says: go...
Worker #1 says: cats...
Worker #2 says: is...
Worker #1 says: are...
Worker #2 says: awesome...
Worker #1 says: cute...
Worker #1 says: rain...
Worker #1 says: is...
...
```

**üß© –†–∞–∑–±–µ—Ä–µ–º –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã –ø–æ—à–∞–≥–æ–≤–æ:**

1. **–°–æ–∑–¥–∞–Ω–∏–µ –ø—É–ª–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤**:

   ```go
   pool := make(chan int, 2)
   pool <- 1
   pool <- 2
   ```

   –°–æ–∑–¥–∞–µ—Ç—Å—è –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª `pool` –µ–º–∫–æ—Å—Ç—å—é 2, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã (1 –∏ 2) –¥–ª—è –¥–≤—É—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –≥–æ—Ä—É—Ç–∏–Ω. –≠—Ç–æ –∫–ª—é—á–µ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∑–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞.

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞**:

   ```go
   for _, phrase := range phrases {
       id := <-pool
       go say(pool, id, phrase)
   }
   ```

   - –î–ª—è –∫–∞–∂–¥–æ–π —Ñ—Ä–∞–∑—ã –∏–∑ —Å–ø–∏—Å–∫–∞ `phrases` –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–∑ –ø—É–ª–∞ (`id := <-pool`)
   - –ï—Å–ª–∏ –≤ –ø—É–ª–µ –µ—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, –æ–Ω –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è, –∏ –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—É—é –≥–æ—Ä—É—Ç–∏–Ω—É
   - –ï—Å–ª–∏ –ø—É–ª –ø—É—Å—Ç (–æ–±–µ –≥–æ—Ä—É—Ç–∏–Ω—ã —É–∂–µ —Ä–∞–±–æ—Ç–∞—é—Ç), –æ–ø–µ—Ä–∞—Ü–∏—è —á—Ç–µ–Ω–∏—è –∏–∑ –∫–∞–Ω–∞–ª–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –∏ –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∂–¥–µ—Ç, –ø–æ–∫–∞ –∫–∞–∫–∞—è-–ª–∏–±–æ –≥–æ—Ä—É—Ç–∏–Ω–∞ –Ω–µ –æ—Å–≤–æ–±–æ–¥–∏—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä

3. **–†–∞–±–æ—Ç–∞ –≥–æ—Ä—É—Ç–∏–Ω—ã –∏ –≤–æ–∑–≤—Ä–∞—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞**:

   ```go
   func say(pool chan<- int, id int, phrase string) {
       // –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ—Ä–∞–∑—ã...
       pool <- id  // –≤–æ–∑–≤—Ä–∞—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –≤ –ø—É–ª
   }
   ```

   - –ì–æ—Ä—É—Ç–∏–Ω–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–≤–æ—é —Ä–∞–±–æ—Ç—É (–≤—ã–≤–æ–¥–∏—Ç —Å–ª–æ–≤–∞ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π)
   - –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã –≥–æ—Ä—É—Ç–∏–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–≤–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø—É–ª (`pool <- id`)
   - –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–ª–µ–¥—É—é—â—É—é –≥–æ—Ä—É—Ç–∏–Ω—É, –æ–∂–∏–¥–∞—é—â—É—é –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞

4. **–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –≥–æ—Ä—É—Ç–∏–Ω**:

   ```go
   <-pool
   <-pool
   ```

   - –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö —Ñ—Ä–∞–∑ –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–∂–∏–¥–∞–µ—Ç, –ø–æ–∫–∞ –≤—Å–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –≤–µ—Ä–Ω—É—Ç—Å—è –≤ –ø—É–ª
   - –¢–∞–∫ –∫–∞–∫ –º—ã –∑–Ω–∞–µ–º, —á—Ç–æ —É –Ω–∞—Å 2 –≥–æ—Ä—É—Ç–∏–Ω—ã, –º—ã –¥–µ–ª–∞–µ–º 2 –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è –∏–∑ –∫–∞–Ω–∞–ª–∞
   - –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—Å–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –∑–∞–∫–æ–Ω—á–∞—Ç —Å–≤–æ—é —Ä–∞–±–æ—Ç—É –∏ –≤–µ—Ä–Ω—É—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã

**‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

1. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≥–æ—Ä—É—Ç–∏–Ω**: –í –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–∞–∫—Å–∏–º—É–º 2 –≥–æ—Ä—É—Ç–∏–Ω—ã, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤.

2. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á**: –•–æ—Ç—è –≥–æ—Ä—É—Ç–∏–Ω –≤—Å–µ–≥–æ 2, –æ–Ω–∏ –º–æ–≥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ—Ä–∞–∑. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –≥–æ—Ä—É—Ç–∏–Ω–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∑–∞–¥–∞—á—É, –æ–Ω–∞ —Å—Ä–∞–∑—É –±–µ—Ä–µ—Ç —Å–ª–µ–¥—É—é—â—É—é.

3. **–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏**: –ï—Å–ª–∏ –æ–¥–Ω–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ (–ø–æ–ª—É—á–∞–µ—Ç –±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—Ä–∞–∑—ã –∏–ª–∏ –º–µ–Ω—å—à–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏), –æ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ–ª—å—à–µ —Ñ—Ä–∞–∑.

4. **–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ**: –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è, –ø–æ–∫–∞ –≤—Å–µ —Ñ—Ä–∞–∑—ã –Ω–µ –±—É–¥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –∏ –≤—Å–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –Ω–µ –≤–µ—Ä–Ω—É—Ç—Å—è –≤ –ø—É–ª.

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ —Å –ø—É–ª–æ–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ ‚Äî —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å—Ç–µ–ø–µ–Ω–∏ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞ –≤ Go –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ç–∏–ø–∞ WaitGroup –∏–ª–∏ –º—å—é—Ç–µ–∫—Å–æ–≤.

---

### N –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç

–†–µ—à–∏—Ç—å –∑–∞–¥–∞—á—É –º–æ–∂–Ω–æ –±—ã–ª–æ –∏ –±–µ–∑ –ø—É–ª–∞ - –±—Ä–æ—Å–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫–∞–Ω–∞–ª –∏ –∑–∞–ø—É—Å–∫–∞–µ–º N –≥–æ—Ä—É—Ç–∏–Ω, –∫–æ—Ç–æ—Ä—ã–µ –µ–≥–æ —Ä–∞–∑–≥—Ä–µ–±–∞—é—Ç:

```go
func main() {
    phrases := []string{
        // ...
    }

    pending := make(chan string)

    go func() {
        for _, phrase := range phrases {
            pending <- phrase
        }
        close(pending)
    }()

    done := make(chan struct{})

    go say(done, pending, 1)
    go say(done, pending, 2)

    <-done
    <-done
}

func say(done chan<- struct{}, pending <-chan string, id int) {
    for phrase := range pending {
        for _, word := range strings.Fields(phrase) {
            fmt.Printf("Worker #%d says: %s...\n", id, word)
            dur := time.Duration(rand.Intn(100)) * time.Millisecond
            time.Sleep(dur)
        }
    }
    done <- struct{}{}
}
```

**üß© –†–∞–∑–±–µ—Ä–µ–º –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã:**

1. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞ –∑–∞–¥–∞—á**:

   ```go
   pending := make(chan string)
   ```

   –°–æ–∑–¥–∞—ë—Ç—Å—è –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –∫–∞–Ω–∞–ª `pending`, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥—É—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è —Ñ—Ä–∞–∑—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏.

2. **–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–¥–∞—á –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω–µ**:

   ```go
   go func() {
       for _, phrase := range phrases {
           pending <- phrase
       }
       close(pending)
   }()
   ```

   - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ —Ñ—Ä–∞–∑—ã –≤ –∫–∞–Ω–∞–ª `pending`
   - –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤—Å–µ—Ö —Ñ—Ä–∞–∑ –∫–∞–Ω–∞–ª –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `close(pending)`
   - –ó–∞–∫—Ä—ã—Ç–∏–µ –∫–∞–Ω–∞–ª–∞ —Å–ª—É–∂–∏—Ç —Å–∏–≥–Ω–∞–ª–æ–º –¥–ª—è –≤–æ—Ä–∫–µ—Ä–æ–≤, —á—Ç–æ –≤—Å–µ –∑–∞–¥–∞—á–∏ –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã

3. **–ó–∞–ø—É—Å–∫ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞ –≤–æ—Ä–∫–µ—Ä–æ–≤**:

   ```go
   done := make(chan struct{})
   
   go say(done, pending, 1)
   go say(done, pending, 2)
   ```

   - –°–æ–∑–¥–∞—ë—Ç—Å—è –∫–∞–Ω–∞–ª `done` –¥–ª—è —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã
   - –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Ä–æ–≤–Ω–æ 2 –≥–æ—Ä—É—Ç–∏–Ω—ã-–≤–æ—Ä–∫–µ—Ä–∞ —Å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏ 1 –∏ 2
   - –ö–∞–∂–¥—ã–π –≤–æ—Ä–∫–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∫–∞–Ω–∞–ª—É –∑–∞–¥–∞—á `pending` –∏ –∫–∞–Ω–∞–ª—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è `done`

4. **–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã –≤–æ—Ä–∫–µ—Ä–∞**:

   ```go
   func say(done chan<- struct{}, pending <-chan string, id int) {
       for phrase := range pending {
           // –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ—Ä–∞–∑—ã...
       }
       done <- struct{}{}
   }
   ```

   - –í–æ—Ä–∫–µ—Ä —á–∏—Ç–∞–µ—Ç —Ñ—Ä–∞–∑—ã –∏–∑ –∫–∞–Ω–∞–ª–∞ `pending` —Å –ø–æ–º–æ—â—å—é —Ü–∏–∫–ª–∞ `range`
   - –¶–∏–∫–ª `range` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –∫–∞–Ω–∞–ª –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
   - –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Ñ—Ä–∞–∑ –≤–æ—Ä–∫–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∏–≥–Ω–∞–ª –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –≤ –∫–∞–Ω–∞–ª `done`

5. **–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –≤–æ—Ä–∫–µ—Ä–æ–≤**:

   ```go
   <-done
   <-done
   ```

   - –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–∂–∏–¥–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –¥–≤—É—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –∏–∑ –∫–∞–Ω–∞–ª–∞ `done`
   - –ö–∞–∫ —Ç–æ–ª—å–∫–æ –æ–±–∞ –≤–æ—Ä–∫–µ—Ä–∞ –∑–∞–≤–µ—Ä—à–∞—Ç —Ä–∞–±–æ—Ç—É –∏ –æ—Ç–ø—Ä–∞–≤—è—Ç —Å–∏–≥–Ω–∞–ª—ã, –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è

**‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:**

1. **–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ**: –ó–∞–∫—Ä—ã—Ç–∏–µ –∫–∞–Ω–∞–ª–∞ `pending` —Å–ª—É–∂–∏—Ç —Å–∏–≥–Ω–∞–ª–æ–º –¥–ª—è –≤–æ—Ä–∫–µ—Ä–æ–≤, —á—Ç–æ –±–æ–ª—å—à–µ –∑–∞–¥–∞—á –Ω–µ –±—É–¥–µ—Ç, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é –∏—Ö —Ä–∞–±–æ—Ç—ã.

–≠—Ç–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω —á–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞—é—Ç ***"–ø–∞—Ç—Ç–µ—Ä–Ω –≤–æ—Ä–∫–µ—Ä-–ø—É–ª"*** (worker pool) –∏–ª–∏ "–ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å-–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å" (producer-consumer). –û–Ω —Ö–æ—Ä–æ—à–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–µ–≥–∫–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–æ—Ä–∫–µ—Ä–æ–≤ –∏–ª–∏ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á.

---

### –ó–∞–∫—Ä—ã—Ç—å –±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª

–ö–∞–∫ –º—ã –∑–Ω–∞–µ–º, –æ–±—ã—á–Ω—ã–π –∫–∞–Ω–∞–ª –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –æ—Ç–¥–∞–µ—Ç –Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ø—Ä–∏–∑–Ω–∞–∫ `false` ([–≤—Å–ø–æ–º–Ω–∏—Ç—å](#–∑–∞–∫—Ä—ã—Ç—ã–π-–∫–∞–Ω–∞–ª))

–ö–∞–Ω–∞–ª —Å –±—É—Ñ–µ—Ä–æ–º –≤–µ–¥–µ—Ç —Å–µ–±—è —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ, –µ—Å–ª–∏ –±—É—Ñ–µ—Ä –ø—É—Å—Ç. –ê –≤–æ—Ç –µ—Å–ª–∏ –≤ –±—É—Ñ–µ—Ä–µ –µ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è ‚Äî –∏–Ω–∞—á–µ:

```go
stream := make(chan int, 2)
stream <- 1
stream <- 2
close(stream)

val, ok := <-stream
fmt.Println(val, ok)
// 1 true

val, ok = <-stream
fmt.Println(val, ok)
// 2 true

val, ok = <-stream
fmt.Println(val, ok)
// 0 false
```

–ü–æ–∫–∞ –≤ –±—É—Ñ–µ—Ä–µ –µ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è, –∫–∞–Ω–∞–ª –æ—Ç–¥–∞–µ—Ç –∏—Ö –∏ –ø—Ä–∏–∑–Ω–∞–∫ `true`. –ö–æ–≥–¥–∞ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω—ã ‚Äî –æ—Ç–¥–∞–µ—Ç –Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ø—Ä–∏–∑–Ω–∞–∫ `false`, –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –∫–∞–Ω–∞–ª.

–ë–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –∑–∞–∫—Ä—ã—Ç—å –∫–∞–Ω–∞–ª, –Ω–µ –∑–∞–¥—É–º—ã–≤–∞—è—Å—å –æ —Ç–æ–º, –æ—Å—Ç–∞–ª–∏—Å—å –≤ –Ω–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–ª–∏ –Ω–µ—Ç. –ü–æ–ª—É—á–∞—Ç–µ–ª—å –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ –∏—Ö —Å—á–∏—Ç–∞–µ—Ç:

```go
stream := make(chan int, 3)

go func() {
    fmt.Println("Sending...")
    stream <- 1
    stream <- 2
    stream <- 3
    close(stream)
    fmt.Println("Sent and closed!")
}()

time.Sleep(500 * time.Millisecond)
fmt.Println("Receiving...")
for val := range stream {
    fmt.Printf("%v ", val)
}
fmt.Println()
fmt.Println("Received!")
```

```bash
Sending...
Sent and closed!
Receiving...
1 2 3
Received!
```

–ë—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª stream –ø—Ä–∏–Ω–∏–º–∞–µ—Ç 3 –∑–Ω–∞—á–µ–Ω–∏—è –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, –∑–∞—Ç–µ–º –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è. –ï—Å–ª–∏ –±—ã –∫–∞–Ω–∞–ª –±—ã–ª –Ω–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º, –æ—Ç–ø—Ä–∞–≤–ª—è—é—â–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∞—Å—å –±—ã –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–æ –º–æ–º–µ–Ω—Ç–∞ –ø–µ—Ä–≤–æ–≥–æ —á—Ç–µ–Ω–∏—è –∏–∑ –∫–∞–Ω–∞–ª–∞.

–î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º —ç—Ç–æ—Ç –∫–æ–¥ —à–∞–≥ –∑–∞ —à–∞–≥–æ–º –∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏ –Ω–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–∞–Ω–∞–ª–æ–º:

**–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–∞–Ω–∞–ª–æ–º:**

1. "Sending..." (–æ—Ç –≥–æ—Ä—É—Ç–∏–Ω—ã)
2. –ì–æ—Ä—É—Ç–∏–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 1, 2, 3 –≤ –∫–∞–Ω–∞–ª –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–≤—Å–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ –±—É—Ñ–µ—Ä)
3. "Sent and closed!" (–æ—Ç –≥–æ—Ä—É—Ç–∏–Ω—ã)
4. –û—Å–Ω–æ–≤–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ "–ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è" –ø–æ—Å–ª–µ 500 –º—Å
5. "Receiving..." (–æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω—ã)
6. "1 2 3 " (–æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω—ã, —á—Ç–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞)
7. "Received!" (–æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω—ã)

‚ùáÔ∏è **–ï—Å–ª–∏ –±—ã –∫–∞–Ω–∞–ª –±—ã–ª –Ω–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º:**

–ï—Å–ª–∏ –±—ã –∫–∞–Ω–∞–ª –±—ã–ª —Å–æ–∑–¥–∞–Ω –±–µ–∑ –±—É—Ñ–µ—Ä–∞, —Ç–æ–≥–¥–∞ –ª–æ–≥–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –±—ã:

1. "Sending..." (–æ—Ç –≥–æ—Ä—É—Ç–∏–Ω—ã)
2. –ì–æ—Ä—É—Ç–∏–Ω–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å 1 –≤ –∫–∞–Ω–∞–ª –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –Ω–∏–∫—Ç–æ –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤ –ø—Ä–∏–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
3. –ß–µ—Ä–µ–∑ 500 –º—Å –æ—Å–Ω–æ–≤–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ "–ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è"
4. "Receiving..." (–æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω—ã)
5. –û—Å–Ω–æ–≤–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ —á–∏—Ç–∞–µ—Ç 1 –∏–∑ –∫–∞–Ω–∞–ª–∞, —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—â—É—é –≥–æ—Ä—É—Ç–∏–Ω—É
6. –û—Ç–ø—Ä–∞–≤–ª—è—é—â–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 2 –∏ —Å–Ω–æ–≤–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
7. –û—Å–Ω–æ–≤–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ —á–∏—Ç–∞–µ—Ç 2, —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—â—É—é –≥–æ—Ä—É—Ç–∏–Ω—É
8. –û—Ç–ø—Ä–∞–≤–ª—è—é—â–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 3 –∏ —Å–Ω–æ–≤–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
9. –û—Å–Ω–æ–≤–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ —á–∏—Ç–∞–µ—Ç 3, —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—â—É—é –≥–æ—Ä—É—Ç–∏–Ω—É
10. –û—Ç–ø—Ä–∞–≤–ª—è—é—â–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –∫–∞–Ω–∞–ª –∏ –≤—ã–≤–æ–¥–∏—Ç "Sent and closed!"
11. –û—Å–Ω–æ–≤–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ü–∏–∫–ª range –∏ –≤—ã–≤–æ–¥–∏—Ç "Received!"

üí° **–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ:**

–í –Ω–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –∫–∞–Ω–∞–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (—Ä–∞–Ω–¥–µ–≤—É). –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –Ω–µ –≤–æ–∑—å–º–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞. –í –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –∫–∞–Ω–∞–ª–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –±—É—Ñ–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø–æ–ª–Ω–µ–Ω.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª —Å —Ä–∞–∑–º–µ—Ä–æ–º 3 –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—é—â–µ–π –≥–æ—Ä—É—Ç–∏–Ω–µ "–≤—ã–ø—É—Å—Ç–∏—Ç—å" –≤—Å–µ —Ç—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ä–∞–∑—É, –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å, –∫–æ–≥–¥–∞ –∏—Ö –∫—Ç–æ-—Ç–æ –ø—Ä–∏–º–µ—Ç, —á—Ç–æ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—è–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è "Sent and closed!" –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –Ω–∞—á–Ω–µ—Ç —á–∏—Ç–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∫–∞–Ω–∞–ª–∞.

---

## nil-–∫–∞–Ω–∞–ª

–ö–∞–∫ —É –ª—é–±–æ–≥–æ —Ç–∏–ø–∞ –≤ Go, —É –∫–∞–Ω–∞–ª–æ–≤ —Ç–æ–∂–µ –µ—Å—Ç—å –Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –≠—Ç–æ¬†`nil`:

```go
var stream chan int
fmt.Println(stream)
// <nil>
```

`nil`-–∫–∞–Ω–∞–ª ‚Äî –º–∞–ª–æ–ø—Ä–∏—è—Ç–Ω–∞—è —à—Ç—É–∫–∞:

- –ó–∞–ø–∏—Å—å –≤ `nil`-–∫–∞–Ω–∞–ª –Ω–∞–≤—Å–µ–≥–¥–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω—É.
- –ß—Ç–µ–Ω–∏–µ –∏–∑ `nil`-–∫–∞–Ω–∞–ª–∞ –Ω–∞–≤—Å–µ–≥–¥–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω—É.
- –ó–∞–∫—Ä—ã—Ç–∏–µ `nil`-–∫–∞–Ω–∞–ª–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–∞–Ω–∏–∫–µ.

```go
var stream chan int

go func() {
    stream <- 1
}()

<-stream

// fatal error: all goroutines are asleep - deadlock!
```

```go
var stream chan int
close(stream)

// panic: close of nil channel
```

–£ `nil`-–∫–∞–Ω–∞–ª–æ–≤ –µ—Å—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—á–µ–Ω—å —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –û–¥–∏–Ω –∏–∑ –Ω–∏—Ö –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–∫–µ. –í —Ü–µ–ª–æ–º ‚Äî —Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –∏–∑–±–µ–≥–∞—Ç—å `nil`-–∫–∞–Ω–∞–ª–æ–≤ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –ø–æ—á—É–≤—Å—Ç–≤—É–µ—Ç–µ, —á—Ç–æ –Ω–∏–∫–∞–∫ –Ω–µ –º–æ–∂–µ—Ç–µ –±–µ–∑ –Ω–∏—Ö –æ–±–æ–π—Ç–∏—Å—å.
