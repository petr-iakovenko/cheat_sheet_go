
# Scheduler Go. –ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏

–í–∏–¥–µ–æ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:

- [–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ Go ‚Äî —Å–∞–º—ã–π –ø–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥ –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º](https://www.youtube.com/watch?v=kedW1xO3Zbo)
- [–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≤ GO - –∫–∞–∫ –æ–Ω —É—Å—Ç—Ä–æ–µ–Ω](https://www.youtube.com/watch?v=0Eb5KeNQV5E)
- [–°–µ–∫—Ä–µ—Ç—ã –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ Go](https://www.youtube.com/watch?v=P2Tzdg8n9hw)

## –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ OS

–ö–∞–∂–¥–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞, –∫–æ—Ç–æ—Ä—É—é –º—ã –∑–∞–ø—É—Å–∫–∞–µ–º, —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å, –∏ –∫–∞–∂–¥–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –µ–≥–æ –Ω–∞—á–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫. –£ –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤. –í—Å–µ –æ–Ω–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞, –∏ —Ä–µ—à–µ–Ω–∏—è –æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ—Ç–æ–∫–∞, –∞ –Ω–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ—Ü–µ—Å—Å–∞. –ü–æ—Ç–æ–∫–∏ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ (–Ω–∞ –æ–¥–Ω–æ–º —è–¥—Ä–µ) –∏–ª–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (–∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–¥—Ä–∞—Ö). –ü–æ—Ç–æ–∫–∏ —Ç–∞–∫–∂–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Å–≤–æ–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ, –ª–æ–∫–∞–ª—å–Ω–æ–µ –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.  
–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ OS –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ç–æ, —á—Ç–æ–±—ã —è–¥—Ä–∞ –Ω–µ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞–ª–∏, –µ—Å–ª–∏ –µ—Å—Ç—å –ø–æ—Ç–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è. –ï–≥–æ –∑–∞–¥–∞—á–∞ - —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–ª–ª—é–∑–∏—é —Ç–æ–≥–æ, —á—Ç–æ –≤—Å–µ –ø–æ—Ç–æ–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–∑–¥–∞–Ω–∏—è —ç—Ç–æ–π –∏–ª–ª—é–∑–∏–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–æ—Ç–æ–∫–∏ —Å –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ø–æ—Ç–æ–∫–∞–º–∏ —Å –±–æ–ª–µ–µ –Ω–∏–∑–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º. –û–¥–Ω–∞–∫–æ –ø–æ—Ç–æ–∫–∏ —Å –±–æ–ª–µ–µ –Ω–∏–∑–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –Ω–µ –¥–æ–ª–∂–Ω—ã –∏—Å–ø—ã—Ç—ã–≤–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ç–∞–∫–∂–µ –¥–æ–ª–∂–µ–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –ø—Ä–∏–Ω–∏–º–∞—è –±—ã—Å—Ç—Ä—ã–µ –∏ —Ä–∞–∑—É–º–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ OS —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º—ã –Ω–µ –º–æ–∂–µ–º –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å –≤ —Ç–æ—Ç –∏–ª–∏ –∏–Ω–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏.

–í–æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–∞–∂–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ OS:

- –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤ (Thread States):

  - Waiting. –ü–æ—Ç–æ–∫ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∂–¥–µ—Ç —á–µ–≥–æ-—Ç–æ, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ –ø—Ä–∏—á–∏–Ω–∞–º, —Å–≤—è–∑–∞–Ω–Ω—ã–º —Å –∂–µ–ª–µ–∑–æ–º (–¥–∏—Å–∫), –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π (—Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã) –∏–ª–∏ —Å –≤—ã–∑–æ–≤–∞–º–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–π (–∞—Ç–æ–º–∞—Ä–Ω—ã–µ, –º—å—é—Ç–µ–∫—Å—ã). –≠—Ç–∏ —Ç–∏–ø—ã –∑–∞–¥–µ—Ä–∂–µ–∫ —è–≤–ª—è—é—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏—á–∏–Ω–æ–π –Ω–∏–∑–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

  - Runnable. –ü–æ—Ç–æ–∫—É —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—Ä–µ–º—è –Ω–∞ —è–¥—Ä–µ, —á—Ç–æ–±—ã –æ–Ω –º–æ–≥ –≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –µ–º—É –º–∞—à–∏–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏. –ï—Å–ª–∏ —É –Ω–∞—Å –º–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω–æ –≤—Ä–µ–º—è, —Ç–æ –∏–º –ø—Ä–∏–¥–µ—Ç—Å—è –∂–¥–∞—Ç—å –¥–æ–ª—å—à–µ, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —ç—Ç–æ –≤—Ä–µ–º—è. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ä–µ–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–ª—É—á–∞–µ—Ç –∫–∞–∂–¥—ã–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ—Ç–æ–∫, —Å–æ–∫—Ä–∞—â–∞–µ—Ç—Å—è, –ø–æ—Å–∫–æ–ª—å–∫—É –±–æ–ª—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ –∫–æ–Ω–∫—É—Ä–∏—Ä—É–µ—Ç –∑–∞ –≤—Ä–µ–º—è. –≠—Ç–æ—Ç —Ç–∏–ø –∑–∞–¥–µ—Ä–∂–∫–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏—á–∏–Ω–æ–π –Ω–∏–∑–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

  - Executing. –ü–æ—Ç–æ–∫ —Ä–∞–∑–º–µ—â–µ–Ω –Ω–∞ —è–¥—Ä–µ –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–≤–æ–∏ –º–∞—à–∏–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.

- –¢–∏–ø—ã –≤—ã–ø–æ–ª–Ω—è–µ–º–æ–π —Ä–∞–±–æ—Ç—ã (Types Of Work):

  - CPU-Bound. –≠—Ç–æ —Ä–∞–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç —Å–∏—Ç—É–∞—Ü–∏–∏, –≥–¥–µ –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–º–µ—â–µ–Ω –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è. –ü—Ä–∏–º–µ—Ä: –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —á–∏—Å–ª–∞ pi –¥–æ n-–π —Ü–∏—Ñ—Ä—ã —è–≤–ª—è–µ—Ç—Å—è CPU-Bound —Ä–∞–±–æ—Ç–æ–π.

  - I/O-Bound. –≠—Ç–æ —Ä–∞–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä–∞—è –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ—Ç–æ–∫–∏ –≤—Ö–æ–¥–∏—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è. –ö–∞–∫ –ø—Ä–∏–º–µ—Ä, —Ä–∞–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –∑–∞–ø—Ä–æ—Å–µ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ—Å—É—Ä—Å—É –ø–æ —Å–µ—Ç–∏ –∏–ª–∏ —Å–æ–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –≤ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É. –ü–æ—Ç–æ–∫, –∫–æ—Ç–æ—Ä–æ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å I/O-Bound —Ä–∞–±–æ—Ç—É.

- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (Context Switching). –≠—Ç–æ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –∞–∫—Ç –æ–±–º–µ–Ω–∞ –ø–æ—Ç–æ–∫–∞–º–∏ –Ω–∞ —è–¥—Ä–µ. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≤—ã—Ç—è–≥–∏–≤–∞–µ—Ç Executing –ø–æ—Ç–æ–∫ –∏–∑ —è–¥—Ä–∞ –∏ –∑–∞–º–µ–Ω—è–µ—Ç –µ–≥–æ Runnable –ø–æ—Ç–æ–∫–æ–º. –í—ã—Ç–∞—â–µ–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ Runnable (–µ—Å–ª–∏ –æ–Ω –≤—Å–µ –µ—â–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å) –∏–ª–∏ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ Waiting (–µ—Å–ª–∏ –æ–Ω –±—ã–ª –∑–∞–º–µ–Ω–µ–Ω –∏–∑-–∑–∞ –∑–∞–ø—Ä–æ—Å–∞ —Ç–∏–ø–∞ I/O-Bound). –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –¥–æ—Ä–æ–≥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–µ–π –∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–æ. –í–µ–ª–∏—á–∏–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∏, –≤–æ–∑–Ω–∏–∫–∞—é—â–∞—è –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤. –ï—Å–ª–∏ –∏—Å—Ö–æ–¥–∏—Ç—å –∏–∑ —Ä–∞—Å—á–µ—Ç–∞, —á—Ç–æ –º–∞—à–∏–Ω–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç 12 –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥—É, –∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∑–∞–Ω–∏–º–∞–µ—Ç ~ 1000 –¥–æ ~ 1500 –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥, —Ç–æ –º—ã —Ç–µ—Ä—è–µ–º 12 000 –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –±–æ–ª–µ–µ.  
–ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–∞, –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Ä–∞–±–æ—Ç—É —Å I/O-Bound, —Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –±—É–¥–µ—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ–º. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ Waiting, –µ–≥–æ –º–µ—Å—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –¥—Ä—É–≥–æ–π –ø–æ—Ç–æ–∫ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Runnable. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —è–¥—Ä—É –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–∞–±–æ—Ç—É, –∏ —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –∞—Å–ø–µ–∫—Ç–æ–≤ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è. –ï—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–∞ –Ω–∞ CPU-Bound —Ä–∞–±–æ—Ç–µ, —Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å—Ç–∞–Ω–µ—Ç –∫–æ—à–º–∞—Ä–æ–º –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ —É –ø–æ—Ç–æ–∫–∞ –µ—Å—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞, –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —ç—Ç–æ–π —Ä–∞–±–æ—Ç—ã. –≠—Ç–∞ —Å–∏—Ç—É–∞—Ü–∏—è —Ä–µ–∑–∫–æ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∏—Ä—É–µ—Ç —Å —Ç–µ–º, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å —Ä–∞–±–æ—á–µ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π, —Å–≤—è–∑–∞–Ω–Ω–æ–π —Å –≤–≤–æ–¥–æ–º-–≤—ã–≤–æ–¥–æ–º (I/O-Bound).

## –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ Go

–ö–∞–∫ –∏ –≤ —Å–ª—É—á–∞–µ —Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º OS, –º—ã –Ω–µ –º–æ–∂–µ–º –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å —Ä–∞–±–æ—Ç—É –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ Go, —Ç–∞–∫ –∫–∞–∫ –æ–Ω —Ç–∞–∫–∂–µ –Ω–µ–¥–µ—Ç–µ—Ä–º–µ–Ω–∏—Ä–æ–≤–∞–Ω. –≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π –¥–ª—è —ç—Ç–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–µ –≤ —Ä—É–∫–∞—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞, –∞ –≤ —Ä—É–∫–∞—Ö runtime Go.  
–ó–¥–µ—Å—å —Ç–∞–∫–∂–µ –ø–µ—Ä–µ—á–∏—Å–ª–∏–º –≤–∞–∂–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ Go:

- P, M, G.

  - P (processor) - –ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä (–Ω–µ –∂–µ–ª–µ–∑–æ). –≠—Ç–æ —É—Å–ª–æ–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –ø–æ—Ç–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (M) –∏ –æ—á–µ—Ä–µ–¥—å –≥–æ—Ä—É—Ç–∏–Ω. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä—É—Ç–∏–Ω, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫ P –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ P –±–µ—Ä—ë—Ç—Å—è –∏–∑ –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å—Ä–µ–¥—ã GOMAXPROCS –∏ —Ä–∞–≤–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —è–¥–µ—Ä –∫–æ–º–ø—å—é—Ç–µ—Ä–∞.

  - M (machine thread) - –ø–æ—Ç–æ–∫ OS. –û–Ω –∑–∞–∫—Ä–µ–ø–ª—ë–Ω –∑–∞ P –∏ –∏–º–µ–µ—Ç —Å –Ω–∏–º –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –æ–¥–∏–Ω –∫ –æ–¥–Ω–æ–º—É.

  - G (goroutine) - –≥–æ—Ä—É—Ç–∏–Ω–∞

-Coroutine. –ö–∞–∂–¥–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ Go —Ç–∞–∫–∂–µ –¥–∞–µ—Ç—Å—è –Ω–∞—á–∞–ª—å–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ (G). Goroutine ‚Äî —ç—Ç–æ, –ø–æ —Å—É—Ç–∏, Coroutine, –Ω–æ —ç—Ç–æ Go, –ø–æ—ç—Ç–æ–º—É –º—ã –∑–∞–º–µ–Ω—è–µ–º –±—É–∫–≤—É C –Ω–∞ G –∏ –ø–æ–ª—É—á–∞–µ–º —Å–ª–æ–≤–æ Goroutine. –ú–æ–∂–Ω–æ –¥—É–º–∞—Ç—å –æ Goroutines –∫–∞–∫ –æ –ø–æ—Ç–æ–∫–∞—Ö —É—Ä–æ–≤–Ω—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–Ω–∏ –≤–æ –º–Ω–æ–≥–æ–º –ø–æ—Ö–æ–∂–∏ –Ω–∞ –ø–æ—Ç–æ–∫–∏ –û–°: –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ –ø–æ—Ç–æ–∫–∏ –û–° –≤–∫–ª—é—á–∞—é—Ç—Å—è –∏ –≤—ã–∫–ª—é—á–∞—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —è–¥—Ä–∞, –≥–æ—Ä—É—Ç–∏–Ω—ã –≤–∫–ª—é—á–∞—é—Ç—Å—è –∏ –≤—ã–∫–ª—é—á–∞—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ—Ç–æ–∫–∞ OS (M). –ü–æ—Ç–æ–∫–∏ OS —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è –Ω–∞ —è–¥—Ä–µ OS, –∞ –≥–æ—Ä—É—Ç–∏–Ω—ã —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è –Ω–∞ –ø–æ—Ç–æ–∫–∞—Ö OS. –°–≤–æ–µ–æ–±—Ä–∞–∑–Ω–∞—è –ø–∏—Ä–∞–º–∏–¥–∞.

- –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤ (Thread States). –¢—É—Ç –æ—á–µ–Ω—å –º–Ω–æ–≥–æ —Å—Ö–æ–∂–µ–≥–æ —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –ø–æ—Ç–æ–∫–æ–≤ OS:

  - Waiting. –ì–æ—Ä—É—Ç–∏–Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏ –æ–∂–∏–¥–∞–µ—Ç —á–µ–≥–æ-—Ç–æ, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ —Ç–∞–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º, –∫–∞–∫ –æ–∂–∏–¥–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (—Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã) –∏–ª–∏ –≤—ã–∑–æ–≤—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –º—å—é—Ç–µ–∫—Å–∞–º–∏). –≠—Ç–∏ —Ç–∏–ø—ã –∑–∞–¥–µ—Ä–∂–µ–∫ —è–≤–ª—è—é—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏—á–∏–Ω–æ–π –Ω–∏–∑–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

  - Runnable: –ì–æ—Ä—É—Ç–∏–Ω–µ –Ω—É–∂–Ω–æ –≤—Ä–µ–º—è –Ω–∞ M, —á—Ç–æ–±—ã –æ–Ω–∞ –º–æ–≥–ª–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏. –ï—Å–ª–∏ –µ—Å—Ç—å –º–Ω–æ–≥–æ –≥–æ—Ä—É—Ç–∏–Ω, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω–æ –≤—Ä–µ–º—è, —Ç–æ –≥–æ—Ä—É—Ç–∏–Ω—ã –¥–æ–ª–∂–Ω—ã –∂–¥–∞—Ç—å –¥–æ–ª—å—à–µ, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —ç—Ç–æ —Å–∞–º–æ–µ –≤—Ä–µ–º—è. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ä–µ–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–ª—É—á–∞–µ—Ç –∫–∞–∂–¥–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞, —Å–æ–∫—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ –º–µ—Ä–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—Å–µ –±–æ–ª—å—à–µ –≥–æ—Ä—É—Ç–∏–Ω —Å–æ—Ä–µ–≤–Ω—É—é—Ç—Å—è –∑–∞ –≤—Ä–µ–º—è. –≠—Ç–æ—Ç —Ç–∏–ø –∑–∞–¥–µ—Ä–∂–∫–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏—á–∏–Ω–æ–π –Ω–∏–∑–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

  - Running. –ì–æ—Ä—É—Ç–∏–Ω–∞ –±—ã–ª–∞ –ø–æ–º–µ—â–µ–Ω–∞ –Ω–∞ M –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–≤–æ–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.

- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (Context Switching). –í —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ OS, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —É –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ GO - –±–æ–ª–µ–µ –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è: ~200 –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥, –ø—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö –º—ã —Ç–µ—Ä—è–µ–º ~2 400 –æ–ø–µ—Ä–∞—Ü–∏–π. –¢–æ –µ—Å—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ –ø—è—Ç—å —Ä–∞–∑ –º–µ–Ω—å—à–µ.

- GRQ, LRQ. –í –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–µ Go –µ—Å—Ç—å –¥–≤–µ —Ä–∞–∑–Ω—ã–µ –æ—á–µ—Ä–µ–¥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: –≥–ª–æ–±–∞–ª—å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (Global Run Queue - GRQ) –∏ –ª–æ–∫–∞–ª—å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (Local Run Queue - LRQ). –ö–∞–∂–¥–æ–º—É P –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è LRQ, –∫–æ—Ç–æ—Ä–∞—è —É–ø—Ä–∞–≤–ª—è–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞ P. –≠—Ç–∏ –≥–æ—Ä—É—Ç–∏–Ω—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è –∏ –≤—ã–∫–ª—é—á–∞—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ M, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ —ç—Ç–æ–º—É P.  
GRQ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –≥–æ—Ä—É—Ç–∏–Ω, –∫–æ—Ç–æ—Ä—ã–µ –µ—â–µ –Ω–µ –±—ã–ª–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ P. –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –≥–æ—Ä—É—Ç–∏–Ω –∏–∑ GRQ –≤ LRQ.
–Ø –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–∏–ª –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –∏ —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º—Å—è –≤ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö —Ä–∞–±–æ—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ Go –∏ –µ–≥–æ –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ—Ç–ª–∏—á–∏—è—Ö –æ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.

–¢–µ–ø–µ—Ä—å –æ–±—ä–µ–¥–∏–Ω–∏–º –≤—Å–µ —Å–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—ã—à–µ –≤ –æ–¥–Ω—É —Å—Ö–µ–º—É:

![image-1](image/image-1.png)

–ù–∞ —Ä–∏—Å—É–Ω–∫–µ 1 –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –º—ã –≤–∏–¥–∏–º –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ—á–µ—Ä–µ–¥—å –≥–æ—Ä—É—Ç–∏–Ω (GRQ), –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –æ–¥–Ω–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞. –í —Ü–µ–Ω—Ç—Ä–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ—Ç–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (M), —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã–π –Ω–∞ —è–¥—Ä–µ (Core), –∏ –∫ —ç—Ç–æ–º—É –ø–æ—Ç–æ–∫—É –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω –ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä (P). –í–∏–¥–∏–º, —á—Ç–æ –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –æ–¥–Ω–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Running, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∞ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ –Ω–∞ –ø–æ—Ç–æ–∫–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (M). –ò –≤–∏–¥–∏–º, —á—Ç–æ —É –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (P) –µ—Å—Ç—å —Å–≤–æ—è –ª–æ–∫–∞–ª—å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å –≥–æ—Ä—É—Ç–∏–Ω (LRQ), –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è 3 –≥–æ—Ä—É—Ç–∏–Ω—ã. –ò—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ runnable.

### Work stealing

–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ GO —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É "–∫—Ä–∞–∂–∏ —Ä–∞–±–æ—Ç—ã". –≠—Ç–æ—Ç –ø—Ä–∏–Ω—Ü–∏–ø –ø–æ–º–æ–≥–∞–µ—Ç –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –≥–æ—Ä—É—Ç–∏–Ω—ã –ø–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞–º (P).

![image-2](image/image-2.png)

–ù–∞ —Ä–∏—Å—É–Ω–∫–µ 2 –º—ã –≤–∏–¥–∏–º –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—É—é Go –ø—Ä–æ–≥—Ä–∞–º–º—É —Å –¥–≤—É–º—è P, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç –ø–æ 4 –≥–æ—Ä—É—Ç–∏–Ω—ã (G). –ï—Å—Ç—å –∏ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å (GRQ) —Å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω–æ–π (G9). –ß—Ç–æ —Å–ª—É—á–∏—Ç—Å—è, –µ—Å–ª–∏ –Ω–∞ –æ–¥–Ω–æ–º –∏–∑ P –≤—Å–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –∑–∞–∫–æ–Ω—á–∞—Ç —Å–≤–æ—é —Ä–∞–±–æ—Ç—É?

![image-3](image/image-3.png)

–ù–∞ —Ä–∏—Å—É–Ω–∫–µ 3 –≤–∏–¥–Ω–æ, —á—Ç–æ —É P1 –±–æ–ª—å—à–µ –Ω–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω. –ù–∏ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Running, –Ω–∏ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Runnable. –û–¥–Ω–∞–∫–æ P2 –≤ —Å–≤–æ–µ–π –ª–æ–∫–∞–ª—å–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ (LRQ) –∏–º–µ–µ—Ç —Ü–µ–ª—ã—Ö 3 –≥–æ—Ä—É—Ç–∏–Ω—ã.
P1, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞—Ç—å, –¥–æ–ª–∂–µ–Ω –±—É–¥–µ—Ç "—É–∫—Ä–∞—Å—Ç—å" —É P2 –≥–æ—Ä—É—Ç–∏–Ω—ã. –í–æ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º –∫—Ä–∞–∂–∏:

```go
runtime.schedule() {
 // only 1/61 of the time, check the global runnable queue for a G.
 // if not found, check the local queue.
 // if not found,
 // try to steal from other Ps.
 // if not, check the global runnable queue.
 // if not found, poll network.
}
```

–°–ª–µ–¥—É—è —ç—Ç–æ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º—É, P1 –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä–∏—Ç—å P2 –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —É –Ω–µ–≥–æ –≥–æ—Ä—É—Ç–∏–Ω –≤ LRQ. –ò –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≤–∑—è—Ç—å –ø–æ–ª–æ–≤–∏–Ω—É:

![image-4](image/image-4.png)

–ß—Ç–æ –º—ã –∏ –≤–∏–¥–∏–º –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ 4(–≤—ã—à–µ).  
–î–∞–ª–µ–µ, —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç, –µ—Å–ª–∏ P2 –∑–∞–∫–æ–Ω—á–∏—Ç –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–≤–æ–∏—Ö –≥–æ—Ä—É—Ç–∏–Ω, –∞ —É P1 –Ω–∏—á–µ–≥–æ –Ω–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ LRQ?

![image-5](image/image-5.png)

–ù–∞ —Ä–∏—Å—É–Ω–∫–µ 5 –≤–∏–¥–∏–º, —á—Ç–æ —É P1 –µ—Å—Ç—å –æ–¥–Ω–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Running –∏ –ø—É—Å—Ç–∞—è LRQ. –£ P2 –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω—ã –∏ —Ç–∞–∫ –∂–µ –ø—É—Å—Ç–∞—è LRQ.

![image-6](image/image-6.png)

–ù–∞ —Ä–∏—Å—É–Ω–∫–µ 6 –≤–∏–¥–Ω–æ, —á—Ç–æ P2 –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –≤–æ–∑—å–º–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω—É –∏–∑ GRQ.

### –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ Go –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Ö–æ—Ç—è –±—ã –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ —Ç–æ–º –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ OS –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ Go, —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –∫–µ–π—Å–∞—Ö –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫–∞–∫ –∫ –ø–æ–≤—ã—à–µ–Ω–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, —Ç–∞–∫ –∏ –∫ –ø–æ—Ç–µ—Ä–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

---

# –û—Ç Claude ai

## üîë –ö–ª—é—á–µ–≤—ã–µ –ø–æ–Ω—è—Ç–∏—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ Go

### 1Ô∏è‚É£ –ú–æ–¥–µ–ª—å P-M-G: –æ—Å–Ω–æ–≤–∞ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞ –≤ Go

–í Go –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –º–æ–¥–µ–ª—å:

- **G (–≥–æ—Ä—É—Ç–∏–Ω–∞)** ‚Äî –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π "–ø–æ—Ç–æ–∫" –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **M (machine)** ‚Äî —Ä–µ–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- **P (processor)** ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä, —Å–≤—è–∑—ã–≤–∞—é—â–∏–π G –∏ M

### 2Ô∏è‚É£ –û—á–µ—Ä–µ–¥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: GRQ –∏ LRQ

```go
// –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
type Scheduler struct {
    // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å –≥–æ—Ä—É—Ç–∏–Ω
    globalQueue []Goroutine  // GRQ
    
    // –ú–∞—Å—Å–∏–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤, –∫–∞–∂–¥—ã–π —Å–æ —Å–≤–æ–µ–π –ª–æ–∫–∞–ª—å–Ω–æ–π –æ—á–µ—Ä–µ–¥—å—é
    processors []*Processor  // P —Å LRQ
}

type Processor struct {
    localQueue []Goroutine  // LRQ
    thread *OSThread        // M
    runningG *Goroutine     // –í—ã–ø–æ–ª–Ω—è–µ–º–∞—è —Å–µ–π—á–∞—Å –≥–æ—Ä—É—Ç–∏–Ω–∞
}
```

### 3Ô∏è‚É£ –ü—Ä–∏–Ω—Ü–∏–ø "–∫—Ä–∞–∂–∏ —Ä–∞–±–æ—Ç—ã" (Work Stealing)

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä —Å –æ—á–µ–Ω—å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏:

```go
// –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–π —Ä–∞–±–æ—Ç—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥–æ—Ä—É—Ç–∏–Ω
package main

import (
    "fmt"
    "runtime"
    "sync"
    "time"
)

func main() {
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ (P)
    // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é = –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —è–¥–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
    runtime.GOMAXPROCS(2) // –°–æ–∑–¥–∞–µ–º 2 P –∫–∞–∫ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ö
    
    var wg sync.WaitGroup
    
    // –°–æ–∑–¥–∞–µ–º 9 –≥–æ—Ä—É—Ç–∏–Ω (–∫–∞–∫ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ö G1-G9)
    for i := 1; i <= 9; i++ {
        wg.Add(1)
        go func(id int) {
            defer wg.Done()
            
            // –ò–º–∏—Ç–∞—Ü–∏—è —Ä–∞–∑–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
            // –≠—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –¥–∏—Å–±–∞–ª–∞–Ω—Å—É –Ω–∞–≥—Ä—É–∑–∫–∏ –º–µ–∂–¥—É P
            if id%2 == 0 {
                // –ß–µ—Ç–Ω—ã–µ –≥–æ—Ä—É—Ç–∏–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±—ã—Å—Ç—Ä–µ–µ
                time.Sleep(100 * time.Millisecond)
            } else {
                // –ù–µ—á–µ—Ç–Ω—ã–µ –≥–æ—Ä—É—Ç–∏–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç –¥–æ–ª—å—à–µ
                time.Sleep(300 * time.Millisecond)
            }
            
            fmt.Printf("–ì–æ—Ä—É—Ç–∏–Ω–∞ G%d –∑–∞–≤–µ—Ä—à–∏–ª–∞ —Ä–∞–±–æ—Ç—É ‚úÖ\n", id)
        }(i)
    }
    
    wg.Wait()
    fmt.Println("–í—Å–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏ —Ä–∞–±–æ—Ç—É!")
}
```

## üîÑ –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º"?

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–∫–∞–∫ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ 2)

- –£ –Ω–∞—Å 2 –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (P1 –∏ P2)
- –ö–∞–∂–¥—ã–π P –∏–º–µ–µ—Ç —Å–≤–æ—é –ª–æ–∫–∞–ª—å–Ω—É—é –æ—á–µ—Ä–µ–¥—å (LRQ) —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏
- –û–¥–Ω–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞ (G9) –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ (GRQ)

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: P1 –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ —Ä–∞–±–æ—Ç—ã (–∫–∞–∫ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ 3)

–ö–æ–≥–¥–∞ P1 –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Å–≤–æ–∏ –≥–æ—Ä—É—Ç–∏–Ω—ã:

1. P1 –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–≤–æ—é LRQ ‚Üí –ø—É—Å—Ç–æ
2. P1 –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ—á–µ—Ä–µ–¥—å (GRQ) ‚Üí –µ—Å—Ç—å G9, –Ω–æ –ø–æ–∫–∞ –Ω–µ –±–µ—Ä–µ—Ç –µ—ë
3. P1 –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º "–∫—Ä–∞–∂–∏ —Ä–∞–±–æ—Ç—ã"

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ö—Ä–∞–∂–∞ —Ä–∞–±–æ—Ç—ã (–∫–∞–∫ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ 4)

```go
// –ü—Å–µ–≤–¥–æ–∫–æ–¥ —Ä–∞–±–æ—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –ø—Ä–∏ –∫—Ä–∞–∂–µ
func findWorkForP(p *Processor) *Goroutine {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–∫–∞–ª—å–Ω—É—é –æ—á–µ—Ä–µ–¥—å (—Å –Ω–µ–±–æ–ª—å—à–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é)
    if g := p.localQueue.pop(); g != nil {
        return g
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ—á–µ—Ä–µ–¥—å (—Ä–µ–¥–∫–æ, –ø—Ä–∏–º–µ—Ä–Ω–æ 1/61 —Ä–∞–∑)
    if rand.Intn(61) == 0 {
        if g := globalQueue.pop(); g != nil {
            return g
        }
    }
    
    // –ü—ã—Ç–∞–µ–º—Å—è —É–∫—Ä–∞—Å—Ç—å –∏–∑ –¥—Ä—É–≥–æ–≥–æ P!
    for _, otherP := range allProcessors {
        if otherP != p && len(otherP.localQueue) > 1 {
            // üí° –ö—Ä–∞–¥–µ–º –ø—Ä–∏–º–µ—Ä–Ω–æ –ø–æ–ª–æ–≤–∏–Ω—É –≥–æ—Ä—É—Ç–∏–Ω!
            stolenGs := otherP.localQueue.stealHalf()
            p.localQueue.push(stolenGs)
            return p.localQueue.pop()
        }
    }
    
    // –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ, –ø—Ä–æ–≤–µ—Ä—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ—á–µ—Ä–µ–¥—å
    if g := globalQueue.pop(); g != nil {
        return g
    }
    
    // –í –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ, –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ—Ç–µ–≤–æ–π –≤–≤–æ–¥-–≤—ã–≤–æ–¥
    return checkNetworkPollers()
}
```

## üí° –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ Go

1. **–õ–µ–≥–∫–æ–≤–µ—Å–Ω–æ—Å—Ç—å –≥–æ—Ä—É—Ç–∏–Ω**: ~2-3 –ö–ë –ø—Ä–æ—Ç–∏–≤ ~2 –ú–ë –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤ OS
2. **–ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**: ~200 –Ω—Å –ø—Ä–æ—Ç–∏–≤ ~1000-1500 –Ω—Å –≤ OS
3. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã**: –∞–ª–≥–æ—Ä–∏—Ç–º "–∫—Ä–∞–∂–∏ —Ä–∞–±–æ—Ç—ã"
4. **–ù–∏–∑–∫–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã**: –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç—ã—Å—è—á–∏ –≥–æ—Ä—É—Ç–∏–Ω

## üìä –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ä—É—Ç–∏–Ω—ã –∏ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º?

### ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –∫–æ–≥–¥–∞

- –ó–∞–¥–∞—á–∞ I/O-bound (—Ä–∞–±–æ—Ç–∞ —Å —Å–µ—Ç—å—é, —Ñ–∞–π–ª–∞–º–∏, –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö)
- –ù—É–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∑–∞–¥–∞—á
- –ï—Å—Ç—å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º –≤ –∞–ª–≥–æ—Ä–∏—Ç–º–µ

```go
// –ü—Ä–∏–º–µ—Ä —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≥–æ—Ä—É—Ç–∏–Ω –¥–ª—è I/O-bound –∑–∞–¥–∞—á
func fetchDataFromMultipleSources() []Data {
    sources := []string{"api1.example.com", "api2.example.com", "api3.example.com"}
    results := make([]Data, len(sources))
    
    var wg sync.WaitGroup
    for i, source := range sources {
        wg.Add(1)
        // üöÄ –ó–¥–µ—Å—å –≥–æ—Ä—É—Ç–∏–Ω—ã —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã, —Ç.–∫. –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏ –æ–Ω–∏ –∂–¥—É—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ç–∏
        go func(index int, url string) {
            defer wg.Done()
            // –ó–∞–ø—Ä–æ—Å –∑–∞–π–º–µ—Ç –≤—Ä–µ–º—è, –Ω–æ –Ω–µ –∑–∞–≥—Ä—É–∑–∏—Ç CPU
            results[index] = fetchFromURL(url)
        }(i, source)
    }
    wg.Wait()
    return results
}
```

### ‚ùå –ò–∑–±–µ–≥–∞–π—Ç–µ –≥–æ—Ä—É—Ç–∏–Ω –∫–æ–≥–¥–∞

- –ó–∞–¥–∞—á–∞ CPU-bound (—Å–ª–æ–∂–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ)
- –ó–∞–¥–∞—á–∏ —Å–∏–ª—å–Ω–æ –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞ (—Ç—Ä–µ–±—É—é—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)
- –ù–µ–æ–±—Ö–æ–¥–∏–º –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```go
// –ü—Ä–∏–º–µ—Ä –ù–ï–≠–§–§–ï–ö–¢–ò–í–ù–û–ì–û –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≥–æ—Ä—É—Ç–∏–Ω –¥–ª—è CPU-bound –∑–∞–¥–∞—á
func calculatePiDigitsBadExample(precision int) string {
    // ‚ö†Ô∏è –ó–¥–µ—Å—å –≥–æ—Ä—É—Ç–∏–Ω—ã –±—É–¥—É—Ç —Ç–æ–ª—å–∫–æ –º–µ—à–∞—Ç—å, —Ç.–∫. —ç—Ç–æ —á–∏—Å—Ç–∞—è CPU-bound –∑–∞–¥–∞—á–∞
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Ç–æ–ª—å–∫–æ –∑–∞–º–µ–¥–ª–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
    var result string
    var wg sync.WaitGroup
    
    wg.Add(1)
    go func() {
        defer wg.Done()
        result = computePi(precision)  // –¢—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
    }()
    
    wg.Wait()
    return result
}
```

## üß© –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –Ω–∞ Go

```go
package main

import (
    "fmt"
    "net/http"
    "sync"
    "time"
)

// –ò–º–∏—Ç–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
var database = map[string]string{
    "user1": "–ê–ª–µ–∫—Å–µ–π",
    "user2": "–ú–∞—Ä–∏—è",
    "user3": "–ò–≤–∞–Ω",
}

// –ò–º–∏—Ç–∞—Ü–∏—è –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∫ –≤–Ω–µ—à–Ω–µ–º—É API
func fetchUserDetails(userID string) string {
    // –ò–º–∏—Ç–∞—Ü–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ –≤—ã–∑–æ–≤–∞ (I/O-bound –æ–ø–µ—Ä–∞—Ü–∏—è)
    time.Sleep(200 * time.Millisecond)
    return "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è " + userID
}

func handleUser(w http.ResponseWriter, r *http.Request) {
    userID := r.URL.Query().Get("id")
    
    // –ü–æ–ª—É—á–∞–µ–º –∏–º—è –∏–∑ "–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"
    name, exists := database[userID]
    if !exists {
        http.Error(w, "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω", http.StatusNotFound)
        return
    }
    
    // üí° –ó–¥–µ—Å—å –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –≥–æ—Ä—É—Ç–∏–Ω—ã –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Ä–∞–∑–Ω—ã–º —Å–µ—Ä–≤–∏—Å–∞–º
    var wg sync.WaitGroup
    var details, stats, preferences string
    
    wg.Add(3)
    // –°–æ–±–∏—Ä–∞–µ–º –¥–µ—Ç–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∑–∞–ø—Ä–æ—Å –∫ –ø–µ—Ä–≤–æ–º—É —Å–µ—Ä–≤–∏—Å—É)
    go func() {
        defer wg.Done()
        details = fetchUserDetails(userID)
    }()
    
    // –°–æ–±–∏—Ä–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (–∑–∞–ø—Ä–æ—Å –∫–æ –≤—Ç–æ—Ä–æ–º—É —Å–µ—Ä–≤–∏—Å—É)
    go func() {
        defer wg.Done()
        time.Sleep(150 * time.Millisecond)
        stats = "–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥: –≤—á–µ—Ä–∞"
    }()
    
    // –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è (–∑–∞–ø—Ä–æ—Å –∫ —Ç—Ä–µ—Ç—å–µ–º—É —Å–µ—Ä–≤–∏—Å—É)
    go func() {
        defer wg.Done()
        time.Sleep(100 * time.Millisecond)
        preferences = "–ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è: –¢–µ–º–Ω–∞—è —Ç–µ–º–∞"
    }()
    
    // –ñ–¥–µ–º, –ø–æ–∫–∞ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∑–∞–≤–µ—Ä—à–∞—Ç—Å—è
    wg.Wait()
    
    // –§–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç –∏–∑ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    response := fmt.Sprintf("–ò–º—è: %s\n%s\n%s\n%s", 
                           name, details, stats, preferences)
    fmt.Fprintln(w, response)
}

func main() {
    http.HandleFunc("/user", handleUser)
    fmt.Println("–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:8080")
    http.ListenAndServe(":8080", nil)
}
```

–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ä—É—Ç–∏–Ω –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤.

## üìö –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ Go ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –º–µ–∂–¥—É –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Ç—è–∂–µ–ª–æ–≤–µ—Å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ OS, –≥–æ—Ä—É—Ç–∏–Ω—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –ª–µ–≥–∫–æ–≤–µ—Å–Ω—É—é –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ç—ã—Å—è—á –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

–ö–ª—é—á–µ–≤–æ–π –ø—Ä–∏–Ω—Ü–∏–ø —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≥–æ—Ä—É—Ç–∏–Ω: –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ –∏—Ö –¥–ª—è –∑–∞–¥–∞—á, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º (I/O-bound), –∏ –∏–∑–±–µ–≥–∞–π—Ç–µ –¥–ª—è –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ-–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á (CPU-bound).

–ò–º–µ—è —ç—Ç–æ –ø–æ–Ω–∏–º–∞–Ω–∏–µ, –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø–∏—Å–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞ Go, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —è–∑—ã–∫–∞ –∏ –µ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞.
